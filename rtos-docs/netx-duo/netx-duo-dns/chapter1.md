---
title: Capitolo 1-Introduzione al client DNS di Azure RTO NetX Duo
description: Il DNS fornisce un database distribuito che contiene il mapping tra i nomi di dominio e gli indirizzi IP fisici.
author: philmea
ms.author: philmea
ms.date: 06/04/2020
ms.topic: article
ms.service: rtos
ms.openlocfilehash: 4c07d6e3183d421c637874dcdeff3767554fca78
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/22/2021
ms.locfileid: "104821929"
---
# <a name="chapter-1---introduction-to-the-azure-rtos-netx-duo-dns-client"></a><span data-ttu-id="0e5f9-103">Capitolo 1-Introduzione al client DNS di Azure RTO NetX Duo</span><span class="sxs-lookup"><span data-stu-id="0e5f9-103">Chapter 1 - Introduction to the Azure RTOS NetX Duo DNS Client</span></span>

<span data-ttu-id="0e5f9-104">Il DNS fornisce un database distribuito che contiene il mapping tra i nomi di dominio e gli indirizzi IP fisici.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-104">The DNS provides a distributed database that contains mapping between domain names and physical IP addresses.</span></span> <span data-ttu-id="0e5f9-105">Il database viene indicato come *distribuito* perché non esiste una singola entità in Internet che contiene il mapping completo.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-105">The database is referred to as *distributed* because there is no single entity on the Internet that contains the complete mapping.</span></span> <span data-ttu-id="0e5f9-106">Un'entità che gestisce una parte del mapping è detta server DNS.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-106">An entity that maintains a portion of the mapping is called a DNS Server.</span></span> <span data-ttu-id="0e5f9-107">Internet è costituito da numerosi server DNS, ognuno dei quali contiene un subset del database.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-107">The Internet is composed of numerous DNS Servers, each of which contains a subset of the database.</span></span> <span data-ttu-id="0e5f9-108">I server DNS rispondono anche alle richieste client DNS per le informazioni di mapping dei nomi di dominio, solo se il server ha il mapping richiesto.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-108">DNS Servers also respond to DNS Client requests for domain name mapping information, only if the server has the requested mapping.</span></span>

<span data-ttu-id="0e5f9-109">Il protocollo client DNS per NetX Duo fornisce all'applicazione i servizi per richiedere informazioni di mapping da uno o più server DNS.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-109">The DNS Client protocol for NetX Duo provides the application with services to request mapping information from one or more DNS Servers.</span></span>

## <a name="dns-client-setup"></a><span data-ttu-id="0e5f9-110">Configurazione del client DNS</span><span class="sxs-lookup"><span data-stu-id="0e5f9-110">DNS Client Setup</span></span>

<span data-ttu-id="0e5f9-111">Per funzionare correttamente, il pacchetto client DNS richiede che sia già stata creata un'istanza IP di NetX Duo.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-111">In order to function properly, the DNS Client package requires that a NetX Duo IP instance has already been created.</span></span>

<span data-ttu-id="0e5f9-112">Dopo aver creato il client DNS, l'applicazione deve aggiungere uno o più server DNS all'elenco dei server gestiti dal client DNS.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-112">After creating the DNS Client, the application must add one or more DNS servers to the server list maintained by the DNS Client.</span></span> <span data-ttu-id="0e5f9-113">Per aggiungere i server DNS, l'applicazione usa il servizio *nxd_dns_server_add* .</span><span class="sxs-lookup"><span data-stu-id="0e5f9-113">To add DNS servers, the application uses the *nxd_dns_server_add* service.</span></span> <span data-ttu-id="0e5f9-114">Il *nx_dns_server_add* servizio client DNS NETX Duo può essere usato anche per aggiungere server.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-114">The NetX Duo DNS Client service *nx_dns_server_add* can also be used to add servers.</span></span> <span data-ttu-id="0e5f9-115">Tuttavia, accetta solo indirizzi IPv4 ed è consigliabile che gli sviluppatori utilizzino invece il servizio *nxd_dns_server_add* .</span><span class="sxs-lookup"><span data-stu-id="0e5f9-115">However it only accepts IPv4 addresses and it is recommended that developers use the *nxd_dns_server_add* service instead.</span></span>

<span data-ttu-id="0e5f9-116">Se l'opzione NX_DNS_IP_GATEWAY_SERVER è abilitata e l'indirizzo del gateway dell'istanza IP è diverso da zero, il gateway dell'istanza IP viene aggiunto automaticamente come server DNS primario.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-116">If the NX_DNS_IP_GATEWAY_SERVER option is enabled, and the IP instance gateway address is non zero, the IP instance gateway is automatically added as the primary DNS server.</span></span> <span data-ttu-id="0e5f9-117">Se le informazioni sul server DNS non sono staticamente note, possono anche essere derivate tramite il Dynamic Host Configuration Protocol (DHCP) per NetX Duo.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-117">If DNS server information is not statically known, it may also be derived through the Dynamic Host Configuration Protocol (DHCP) for NetX Duo.</span></span> <span data-ttu-id="0e5f9-118">Per ulteriori informazioni, vedere la guida dell'utente di NetX Duo DHCP.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-118">Please refer to the NetX Duo DHCP User Guide for more information.</span></span>

<span data-ttu-id="0e5f9-119">Il client DNS richiede un pool di pacchetti per la trasmissione di messaggi DNS.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-119">The DNS Client requires a packet pool for transmitting DNS messages.</span></span> <span data-ttu-id="0e5f9-120">Per impostazione predefinita, il client DNS crea questo pool di pacchetti quando viene chiamato il servizio *nx_dns_create* .</span><span class="sxs-lookup"><span data-stu-id="0e5f9-120">By default, the DNS Client creates this packet pool when the *nx_dns_create* service is called.</span></span> <span data-ttu-id="0e5f9-121">Le opzioni di configurazione NX_DNS_PACKET_PAYLOAD_UNALIGNED e NX_DNS_PACKET_POOL_SIZE consentono all'applicazione di determinare rispettivamente il payload del pacchetto e le dimensioni del pool di pacchetti (ad esempio, il numero di pacchetti) del pool di pacchetti.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-121">The configuration options NX_DNS_PACKET_PAYLOAD_UNALIGNED and NX_DNS_PACKET_POOL_SIZE allow the application to determine the packet payload and packet pool size (e.g. number of packets) of this packet pool respectively.</span></span> <span data-ttu-id="0e5f9-122">Queste opzioni sono descritte nella sezione "opzioni di configurazione" del capitolo due.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-122">These options are described in section “Configuration Options” in Chapter Two.</span></span>

<span data-ttu-id="0e5f9-123">Un'alternativa al client DNS che crea il proprio pool di pacchetti consiste nel creare il pool di pacchetti da parte dell'applicazione e impostarlo come pool di pacchetti del client DNS usando il servizio *nx_dns_packet_pool_set* .</span><span class="sxs-lookup"><span data-stu-id="0e5f9-123">An alternative to the DNS Client creating its own packet pool is for the application to create the packet pool and set it as the DNS Client’s packet pool using the *nx_dns_packet_pool_set* service.</span></span> <span data-ttu-id="0e5f9-124">A tale scopo, è necessario definire l'opzione NX_DNS_CLIENT_USER_CREATE_PACKET_POOL.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-124">To do so, the NX_DNS_CLIENT_USER_CREATE_PACKET_POOL option must be defined.</span></span> <span data-ttu-id="0e5f9-125">Questa opzione richiede inoltre un pool di pacchetti creato in precedenza utilizzando *nx_packet_pool_create* come input del puntatore del pool di pacchetti per *nx_dns_packet_pool_set* .</span><span class="sxs-lookup"><span data-stu-id="0e5f9-125">This option also requires a previously created packet pool using *nx_packet_pool_create* as the packet pool pointer input to *nx_dns_packet_pool_set* .</span></span> <span data-ttu-id="0e5f9-126">Quando viene eliminata l'istanza del client DNS, l'applicazione è responsabile dell'eliminazione del pool di pacchetti client DNS se NX_DNS_CLIENT_USER_CREATE_PACKET_POOL è abilitato se non è più necessario.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-126">When the DNS Client instance is deleted, the application is responsible for deleting the DNS Client packet pool if NX_DNS_CLIENT_USER_CREATE_PACKET_POOL is enabled if it is no longer needed.</span></span>

> [!NOTE] 
> <span data-ttu-id="0e5f9-127">Per le applicazioni che scelgono di fornire il proprio pool di pacchetti usando l'opzione NX_DNS_CLIENT_USER_CREATE_PACKET_POOL, le dimensioni del pacchetto devono essere in grado di contenere le dimensioni massime del massaggio DNS (512 byte) più le camere per l'intestazione UDP, l'intestazione IPv4 o IPv6 e l'intestazione MAC.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-127">For applications choosing to provide its own packet pool using the NX_DNS_CLIENT_USER_CREATE_PACKET_POOL option, the packet size needs to be able to hold the DNS maximum massage size (512 bytes) plus rooms for UDP header, IPv4 or IPv6 header, and the MAC header.</span></span>

## <a name="dns-messages"></a><span data-ttu-id="0e5f9-128">Messaggi DNS</span><span class="sxs-lookup"><span data-stu-id="0e5f9-128">DNS Messages</span></span>

<span data-ttu-id="0e5f9-129">Il DNS ha un meccanismo molto semplice per ottenere il mapping tra i nomi host e gli indirizzi IP.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-129">The DNS has a very simple mechanism for obtaining mapping between host names and IP addresses.</span></span> <span data-ttu-id="0e5f9-130">Per ottenere un mapping, il client DNS prepara un messaggio di query DNS contenente il nome o l'indirizzo IP che deve essere risolto.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-130">To obtain a mapping, the DNS Client prepares a DNS query message containing the name or the IP address that needs to be resolved.</span></span> <span data-ttu-id="0e5f9-131">Il messaggio viene quindi inviato al primo server DNS nell'elenco Server.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-131">The message is then sent to the first DNS server in the server list.</span></span> <span data-ttu-id="0e5f9-132">Se il server dispone di tale mapping, risponde al client DNS utilizzando un messaggio di risposta DNS che contiene le informazioni di mapping richieste.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-132">If the server has such a mapping, it replies to the DNS Client using a DNS response message that contains the requested mapping information.</span></span> <span data-ttu-id="0e5f9-133">Se il server non risponde, il client DNS esegue una query sul server successivo nell'elenco fino a quando non viene eseguita una query su tutti i server DNS.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-133">If the server does not respond, the DNS Client queries the next server on its list until all its DNS servers have been queried.</span></span> <span data-ttu-id="0e5f9-134">Se non viene ricevuta alcuna risposta da tutti i server DNS, il client DNS ha la logica di ripetizione dei tentativi per ritrasmettere il messaggio DNS.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-134">If no response from all its DNS servers is received, the DNS Client has retry logic to retransmit the DNS message.</span></span> <span data-ttu-id="0e5f9-135">Quando si invia nuovamente una query DNS, il timeout di ritrasmissione viene raddoppiato.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-135">On resending a DNS query, the retransmission timeout is doubled.</span></span> <span data-ttu-id="0e5f9-136">Questo processo continua fino a raggiungere il timeout di trasmissione massimo (definito come NX_DNS_MAX_RETRANS_TIMEOUT in *nxd_dns. h*) o fino a quando non viene ricevuta una risposta corretta da tale server.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-136">This process continues until the maximum transmission timeout (defined as NX_DNS_MAX_RETRANS_TIMEOUT in *nxd_dns.h*) is reached or until a successful response is received from that server is obtained.</span></span>

<span data-ttu-id="0e5f9-137">Il client DNS NetX Duo può eseguire sia ricerche di indirizzi IPv6 (tipo AAAA) che ricerche di indirizzi IPv4 (digitare A) specificando la versione dell'indirizzo IP nella chiamata *nxd_dns_host_by_name_get* .</span><span class="sxs-lookup"><span data-stu-id="0e5f9-137">NetX Duo DNS Client can perform both IPv6 address lookups (type AAAA) and IPv4 address lookups (type A) by specifying the version of the IP address in the *nxd_dns_host_by_name_get* call.</span></span> <span data-ttu-id="0e5f9-138">Il client DNS può eseguire ricerche inverse degli indirizzi IP (tipo query PTR) per ottenere i nomi host web usando *nxd_dns_host_by_address_get*.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-138">The DNS Client can perform reverse lookups of IP addresses (type PTR queries) to obtain web host names using *nxd_dns_host_by_address_get*.</span></span> <span data-ttu-id="0e5f9-139">Il client DNS NetX Duo supporta ancora la *nx_dns_host_by_name_get* e *nx_dns_host_by_address_get* che sono i servizi equivalenti, ma che sono limitati alla comunicazione di rete IPv4.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-139">The NetX Duo DNS Client still supports the *nx_dns_host_by_name_get* and *nx_dns_host_by_address_get* which are the equivalent services but which are limited to IPv4 network communication.</span></span> <span data-ttu-id="0e5f9-140">Tuttavia, gli sviluppatori sono invitati a trasferire le applicazioni client DNS esistenti ai servizi *nxd_dns_host_by_name_get* e *nxd_dns_host_by_address_get* .</span><span class="sxs-lookup"><span data-stu-id="0e5f9-140">However, developers are encouraged to port existing DNS Client applications to the *nxd_dns_host_by_name_get* and *nxd_dns_host_by_address_get* services.</span></span>

<span data-ttu-id="0e5f9-141">La messaggistica DNS usa il protocollo UDP per inviare le richieste e le risposte dei campi.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-141">DNS messaging utilizes the UDP protocol to send requests and field responses.</span></span> <span data-ttu-id="0e5f9-142">Un server DNS è in ascolto sul numero di porta 53 per le query dai client.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-142">A DNS Server listens on port number 53 for queries from clients.</span></span> <span data-ttu-id="0e5f9-143">Per questo motivo i servizi UDP devono essere abilitati in NetX Duo usando il servizio \***nx_udp_enable** _ in un'istanza IP creata in precedenza (_ *_nx_ip_create_* \*).</span><span class="sxs-lookup"><span data-stu-id="0e5f9-143">Therefore UDP services must be enabled in NetX Duo using the ***nx_udp_enable** _ service on a previously created IP instance (_*_nx_ip_create_\*\*).</span></span>

<span data-ttu-id="0e5f9-144">A questo punto, il client DNS è pronto ad accettare le richieste dall'applicazione e a inviare le query DNS.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-144">At this point, the DNS Client is ready to accept requests from the application and send out DNS queries.</span></span>

## <a name="extended-dns-resource-record-types"></a><span data-ttu-id="0e5f9-145">Tipi di record di risorse DNS estesi</span><span class="sxs-lookup"><span data-stu-id="0e5f9-145">Extended DNS Resource Record Types</span></span>

<span data-ttu-id="0e5f9-146">Se NX_DNS_ENABLE_EXTENDED_RR_TYPES è abilitato, il client DNS di NetX Duo supporta anche le query del tipo di record seguenti:</span><span class="sxs-lookup"><span data-stu-id="0e5f9-146">If NX_DNS_ENABLE_EXTENDED_RR_TYPES is enabled, NetX Duo DNS Client also supports the following record type queries:</span></span>

- <span data-ttu-id="0e5f9-147">CNAME: contiene il nome canonico di un alias</span><span class="sxs-lookup"><span data-stu-id="0e5f9-147">CNAME: contains the canonical name for an alias</span></span>
- <span data-ttu-id="0e5f9-148">TXT: contiene una stringa di testo</span><span class="sxs-lookup"><span data-stu-id="0e5f9-148">TXT: contains a text string</span></span>
- <span data-ttu-id="0e5f9-149">NS: contiene un server di nomi autorevole</span><span class="sxs-lookup"><span data-stu-id="0e5f9-149">NS: contains an authoritative name server</span></span>
- <span data-ttu-id="0e5f9-150">SOA: contiene l'inizio di una zona di autorità</span><span class="sxs-lookup"><span data-stu-id="0e5f9-150">SOA: contains the start of a zone of authority</span></span>
- <span data-ttu-id="0e5f9-151">MX: usato per lo scambio di posta</span><span class="sxs-lookup"><span data-stu-id="0e5f9-151">MX: used for mail exchange</span></span>
- <span data-ttu-id="0e5f9-152">SRV: contiene informazioni sul servizio offerte dal dominio</span><span class="sxs-lookup"><span data-stu-id="0e5f9-152">SRV: contains information on the service offered by the domain</span></span>

<span data-ttu-id="0e5f9-153">Fatta eccezione per i tipi di record CNAME e TXT, l'applicazione deve fornire un buffer allineato a 4 byte per ricevere il record di dati DNS.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-153">With the exception of CNAME and TXT record types, the application must supply a 4-byte aligned buffer to receive the DNS data record.</span></span>

<span data-ttu-id="0e5f9-154">Nel client DNS di NetX Duo, i dati dei record vengono archiviati in modo da sfruttare al meglio lo spazio del buffer.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-154">In NetX Duo DNS Client, record data is stored in such a way to make most efficient use of buffer space.</span></span>

<span data-ttu-id="0e5f9-155">Di seguito è riportato un esempio di un buffer di record di lunghezza fissa (record AAAA di tipo):</span><span class="sxs-lookup"><span data-stu-id="0e5f9-155">An example of a record buffer of fixed length (type AAAA record) is shown below:</span></span>

![Buffer di record di lunghezza fissa](media/image2.png)

<span data-ttu-id="0e5f9-157">Per le query i cui tipi di record hanno una lunghezza di dati variabile, ad esempio record NS i cui nomi host sono di lunghezza variabile, il client DNS di NetX Duo Salva i dati come indicato di seguito.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-157">For those queries whose record types have variable data length, such as NS records whose host names are of variable length, NetX Duo DNS Client saves the data as follows.</span></span> <span data-ttu-id="0e5f9-158">Il buffer fornito nella query del client DNS è organizzato in un'area di dati a lunghezza fissa e in un'area di memoria non strutturata.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-158">The buffer supplied in the DNS Client query is organized into an area of fixed length data and an area of unstructured memory.</span></span> <span data-ttu-id="0e5f9-159">La parte superiore del buffer di memoria è organizzata in voci di record allineate a 4 byte.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-159">The top of the memory buffer is organized into 4-byte aligned record entries.</span></span> <span data-ttu-id="0e5f9-160">Ogni voce di record contiene l'indirizzo IP e un puntatore ai dati a lunghezza variabile per l'indirizzo IP.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-160">Each record entry contains the IP address and a pointer to the variable length data for that IP address.</span></span> <span data-ttu-id="0e5f9-161">I dati a lunghezza variabile per ogni indirizzo IP vengono archiviati nella memoria di area non strutturata a partire dalla fine del buffer di memoria.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-161">The variable length data for each IP address are stored in the unstructured area memory starting at the end of the memory buffer.</span></span> <span data-ttu-id="0e5f9-162">I dati a lunghezza variabile per ogni voce di record successiva vengono salvati nella memoria di area successiva accanto ai dati variabili delle voci di record precedenti.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-162">The variable length data for each successive record entry is saved in the next area memory adjacent to the previous record entries variable data.</span></span> <span data-ttu-id="0e5f9-163">Di conseguenza, i dati delle variabili "crescono" verso l'area strutturata della memoria contenente le voci di record fino a quando non è disponibile memoria sufficiente per archiviare un'altra voce di record e i dati delle variabili.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-163">Hence, the variable data ‘grows’ towards the structured area of memory containing the record entries until there is insufficient memory to store another record entry and variable data.</span></span>

<span data-ttu-id="0e5f9-164">Questa procedura è illustrata nella figura seguente:</span><span class="sxs-lookup"><span data-stu-id="0e5f9-164">This is shown in the figure below:</span></span>

![Figura 2](media/image3.png)

<span data-ttu-id="0e5f9-166">L'esempio di archiviazione dei dati del nome di dominio DNS (NS) è illustrato in precedenza.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-166">The example of the DNS domain name (NS) data storage is shown above.</span></span>

<span data-ttu-id="0e5f9-167">Le query client DNS di NetX Duo con il formato di archiviazione dei record restituiscono il numero di record salvati nel buffer di record.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-167">NetX Duo DNS Client queries using the record storage format return the number of records saved to the record buffer.</span></span> <span data-ttu-id="0e5f9-168">Queste informazioni consentono all'applicazione di estrarre i record NS dal buffer di record.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-168">This information enables the application to extract NS records from the record buffer.</span></span>

<span data-ttu-id="0e5f9-169">Di seguito è riportato un esempio di query client DNS che archivia i dati DNS a lunghezza variabile usando questo formato di archiviazione di record:</span><span class="sxs-lookup"><span data-stu-id="0e5f9-169">An example of a DNS Client query that stores variable length DNS data using this record storage format is shown below:</span></span>

```C
UINT  _nx_dns_domain_name_server_get(NX_DNS *dns_ptr, 
                    UCHAR *host_name, VOID *record_buffer, 
                    UINT buffer_size, UINT *record_count, 
                    ULONG wait_option);
```


<span data-ttu-id="0e5f9-170">Ulteriori informazioni sono disponibili nel capitolo 3 "Descrizione dei servizi client DNS".</span><span class="sxs-lookup"><span data-stu-id="0e5f9-170">More details are available in Chapter 3, “Description of DNS Client Services”.</span></span>

## <a name="dns-cache"></a><span data-ttu-id="0e5f9-171">Cache DNS</span><span class="sxs-lookup"><span data-stu-id="0e5f9-171">DNS Cache</span></span>

<span data-ttu-id="0e5f9-172">Se NX_DNS_CACHE_ENABLE è abilitato, il client DNS di NetX Duo supporta la funzionalità cache DNS.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-172">If NX_DNS_CACHE_ENABLE is enabled, NetX Duo DNS Client supports the DNS Cache feature.</span></span> <span data-ttu-id="0e5f9-173">Dopo aver creato il client DNS, l'applicazione può chiamare l'API *nx_dns_cache_initialize ()* per impostare la cache DNS speciale.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-173">After creating the DNS Client, the application can call the API *nx_dns_cache_initialize()* to set the special DNS Cache.</span></span> <span data-ttu-id="0e5f9-174">Se Abilita la funzionalità cache DNS, il client DNS troverà la risposta disponibile dalla cache DNS prima di iniziare a inviare una query DNS, se trova la risposta disponibile, restituirà direttamente la risposta all'applicazione; in caso contrario, il client DNS invia il messaggio di query al server DNS e attende la risposta.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-174">If enable DNS Cache feature, DNS Client will find the available answer from DNS Cache before starts to send DNS query, if find the available answer, directly return the answer to application, otherwise DNS Client sends out query message to DNS server and waits for the reply.</span></span> <span data-ttu-id="0e5f9-175">Quando il client DNS ottiene il messaggio di risposta ed è disponibile una cache gratuita, il client DNS restituisce la risposta all'applicazione e aggiunge la risposta come record di risorse nella cache DNS.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-175">When DNS Client gets the response message and there is free cache available, DNS Client returns the answer to the application and also adds the answer as resource record into DNS cache.</span></span>

<span data-ttu-id="0e5f9-176">Ogni risposta a una struttura di dati *NX_DNS_RR* (record di risorse) nella cache.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-176">Each answer a data structure *NX_DNS_RR* (Resource Record) in the cache.</span></span> <span data-ttu-id="0e5f9-177">Le stringhe (nome e dati del record di risorse) nei record sono a lunghezza variabile e pertanto non sono archiviate nella struttura di NX_DNS_RR.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-177">Strings (resource record name and data) in Records are variable length, therefore are not stored in the NX_DNS_RR structure.</span></span> <span data-ttu-id="0e5f9-178">Il record contiene puntatori alla posizione di memoria effettiva in cui sono archiviate le stringhe.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-178">The Record contains pointers to the actual memory location where the strings are stored.</span></span> <span data-ttu-id="0e5f9-179">La tabella delle stringhe e i record condividono la cache.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-179">The string table and the Records share the cache.</span></span> <span data-ttu-id="0e5f9-180">I record vengono archiviati dall'inizio della cache e aumentano verso la fine della cache.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-180">Records are stored from the beginning of the cache, and grow towards the end of the cache.</span></span> <span data-ttu-id="0e5f9-181">La tabella delle stringhe inizia dalla fine della cache e cresce verso l'inizio della cache.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-181">The string table starts from the end of the cache and grows towards the beginning of the cache.</span></span> <span data-ttu-id="0e5f9-182">Ogni stringa nella tabella di stringhe ha un campo lunghezza e un campo contatore.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-182">Each string in the string table has a length field and a counter field.</span></span> <span data-ttu-id="0e5f9-183">Quando una stringa viene aggiunta alla tabella delle stringhe, se la stessa stringa è già presente nella tabella, il valore del contatore viene incrementato e non viene allocata alcuna memoria per la stringa.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-183">When a string is added to the string table, if the same string is already present in the table, the counter value is incremented and no memory is allocated for the string.</span></span> <span data-ttu-id="0e5f9-184">La cache è considerata completa se non è possibile aggiungere più record di risorse o nuove stringhe alla cache.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-184">The cache is considered full if no more resource records or new strings can be added to the cache.</span></span>

## <a name="dns-client-limitations"></a><span data-ttu-id="0e5f9-185">Limitazioni del client DNS</span><span class="sxs-lookup"><span data-stu-id="0e5f9-185">DNS Client Limitations</span></span>

<span data-ttu-id="0e5f9-186">Il client DNS supporta una richiesta DNS alla volta.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-186">The DNS Client supports one DNS request at a time.</span></span> <span data-ttu-id="0e5f9-187">I thread che tentano di eseguire un'altra richiesta DNS sono temporaneamente bloccati fino al completamento della richiesta DNS precedente.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-187">Threads attempting to make another DNS request are temporarily blocked until the previous DNS request is complete.</span></span>

<span data-ttu-id="0e5f9-188">Il client DNS NetX Duo non usa i dati delle risposte autorevoli per inviare query DNS aggiuntive ad altri server DNS.</span><span class="sxs-lookup"><span data-stu-id="0e5f9-188">The NetX Duo DNS Client does not use data from authoritative answers to forward additional DNS queries to other DNS servers.</span></span>

## <a name="dns-rfcs"></a><span data-ttu-id="0e5f9-189">RFC DNS</span><span class="sxs-lookup"><span data-stu-id="0e5f9-189">DNS RFCs</span></span>

<span data-ttu-id="0e5f9-190">Il DNS di NetX Duo è conforme alle RFC seguenti:</span><span class="sxs-lookup"><span data-stu-id="0e5f9-190">NetX Duo DNS is compliant with the following RFCs:</span></span>

- <span data-ttu-id="0e5f9-191">NOMI DI DOMINIO RFC1034-CONCETTI E FUNZIONALITÀ</span><span class="sxs-lookup"><span data-stu-id="0e5f9-191">RFC1034 DOMAIN NAMES - CONCEPTS AND FACILITIES</span></span>
- <span data-ttu-id="0e5f9-192">NOMI DI DOMINIO RFC1035-IMPLEMENTAZIONE E SPECIFICA</span><span class="sxs-lookup"><span data-stu-id="0e5f9-192">RFC1035 DOMAIN NAMES - IMPLEMENTATION AND SPECIFICATION</span></span>
- <span data-ttu-id="0e5f9-193">RFC1480 dominio degli Stati Uniti</span><span class="sxs-lookup"><span data-stu-id="0e5f9-193">RFC1480 The US Domain</span></span>
- <span data-ttu-id="0e5f9-194">RFC 2782 un RR DNS per specificare il percorso dei servizi (DNS SRV)</span><span class="sxs-lookup"><span data-stu-id="0e5f9-194">RFC 2782 A DNS RR for specifying the location of services (DNS SRV)</span></span>
- <span data-ttu-id="0e5f9-195">RFC 3596 estensioni DNS per supportare IP versione 6</span><span class="sxs-lookup"><span data-stu-id="0e5f9-195">RFC 3596 DNS Extensions to Support IP Version 6</span></span>