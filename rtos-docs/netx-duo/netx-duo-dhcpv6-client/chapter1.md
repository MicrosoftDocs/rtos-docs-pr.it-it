---
title: Capitolo 1-Introduzione ad Azure RTO NetX Duo DHCPv6 client
description: Nelle reti IPv6, DHCPv6 sostituisce DHCP per l'assegnazione di indirizzi IP globali dinamici da un server DHCPv6 e offre la maggior parte delle stesse funzionalità, oltre a molti miglioramenti.
author: philmea
ms.author: philmea
ms.date: 06/04/2020
ms.topic: article
ms.service: rtos
ms.openlocfilehash: 3bf3b52c53bb26e2c9c2c736ae35817eb967f609
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/22/2021
ms.locfileid: "104822001"
---
# <a name="chapter-1---introduction-to-azure-rtos-netx-duo-dhcpv6-client"></a><span data-ttu-id="0b89b-103">Capitolo 1-Introduzione ad Azure RTO NetX Duo DHCPv6 client</span><span class="sxs-lookup"><span data-stu-id="0b89b-103">Chapter 1 - Introduction to Azure RTOS NetX Duo DHCPv6 Client</span></span>

<span data-ttu-id="0b89b-104">Nelle reti IPv6, DHCPv6 sostituisce DHCP per l'assegnazione di indirizzi IP globali dinamici da un server DHCPv6 e offre la maggior parte delle stesse funzionalità, oltre a molti miglioramenti.</span><span class="sxs-lookup"><span data-stu-id="0b89b-104">In IPv6 networks, DHCPv6 replaces DHCP for dynamic global IP address assignment from a DHCPv6 Server, and offers most of the same features as well as many enhancements.</span></span> <span data-ttu-id="0b89b-105">Questo documento illustra in dettaglio in che modo viene usata l'API client DHCPv6 di Azure RTO NetX Duo per ottenere gli indirizzi IPv6.</span><span class="sxs-lookup"><span data-stu-id="0b89b-105">This document will explain in detail how the Azure RTOS NetX Duo DHCPv6 Client API is used to obtain IPv6 addresses.</span></span>

## <a name="dhcpv6-communication"></a><span data-ttu-id="0b89b-106">Comunicazione DHCPv6</span><span class="sxs-lookup"><span data-stu-id="0b89b-106">DHCPv6 Communication</span></span>

<span data-ttu-id="0b89b-107">Il protocollo DHCPv6 utilizza UDP.</span><span class="sxs-lookup"><span data-stu-id="0b89b-107">The DHCPv6 protocol uses UDP.</span></span> <span data-ttu-id="0b89b-108">Il client utilizza la porta 546 e il server utilizza la porta 547 per scambiare messaggi DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="0b89b-108">The Client uses port 546 and the Server uses port 547 to exchange DHCPv6 messages.</span></span> <span data-ttu-id="0b89b-109">Il client usa l'indirizzo locale del collegamento per un indirizzo di origine per avviare le richieste DHCPv6 ai server DHCPv6 disponibili.</span><span class="sxs-lookup"><span data-stu-id="0b89b-109">The Client uses its link local address for a source address to initiate the DHCPv6 requests to the DHCPv6 server(s) available.</span></span> <span data-ttu-id="0b89b-110">Quando il client invia messaggi destinati a tutti i server DHCPv6 sulla rete, usa l'  indirizzo multicast All_DHCP_Relay_Agents_and_Servers *FF02:: 01:02*.</span><span class="sxs-lookup"><span data-stu-id="0b89b-110">When the Client sends messages intended for all DHCPv6 servers on the network it uses the *All_DHCP_Relay_Agents_and_Servers* multicast address *FF02::01:02*.</span></span> <span data-ttu-id="0b89b-111">Si tratta di un indirizzo multicast riservato con ambito collegamento.</span><span class="sxs-lookup"><span data-stu-id="0b89b-111">This is a reserved, link-scoped multicast address.</span></span>

## <a name="dhcpv6-process-of-requesting-an-ipv6-address"></a><span data-ttu-id="0b89b-112">Processo DHCPv6 di richiesta di un indirizzo IPv6</span><span class="sxs-lookup"><span data-stu-id="0b89b-112">DHCPv6 Process of Requesting an IPv6 Address</span></span>

<span data-ttu-id="0b89b-113">Per iniziare il processo di richiesta di un'assegnazione di indirizzi IPv6 globale, un client invia un messaggio di SOLLECITAzione tramite il servizio *nx_dhcpv6_send_solicit* :</span><span class="sxs-lookup"><span data-stu-id="0b89b-113">To begin the process of requesting a global IPv6 address assignment, a Client first sends a SOLICIT message using the *nx_dhcpv6_send_solicit* service:</span></span>

<span data-ttu-id="0b89b-114">**UINT nx_dhcpv6_request_solicit (NX_DHCPV6 \* dhcpv6_ptr)**</span><span class="sxs-lookup"><span data-stu-id="0b89b-114">**UINT nx_dhcpv6_request_solicit(NX_DHCPV6 \*dhcpv6_ptr)**</span></span>

<span data-ttu-id="0b89b-115">Questo messaggio viene inviato a tutti i server che usano l'indirizzo *All_DHCP_Relay_Agents_and_Servers* .</span><span class="sxs-lookup"><span data-stu-id="0b89b-115">This message is sent to all servers using the *All_DHCP_Relay_Agents_and_Servers* address.</span></span> <span data-ttu-id="0b89b-116">Nella richiesta di SOLLECITAzione il client può richiedere l'assegnazione di indirizzi IPv6 specifici come hint al server.</span><span class="sxs-lookup"><span data-stu-id="0b89b-116">In the SOLICIT request, the Client may request the assignment of specific IPv6 address(es) as a hint to the Server.</span></span> <span data-ttu-id="0b89b-117">Può anche richiedere altre informazioni di configurazione di rete dal server, ad esempio server DNS, server NTP e altre opzioni nella richiesta di opzione nel messaggio di SOLLECITAzione.</span><span class="sxs-lookup"><span data-stu-id="0b89b-117">It can also request other network configuration information from the Server such as DNS server, NTP server and other options in the Option Request in the SOLICIT message.</span></span>

<span data-ttu-id="0b89b-118">Un server DHCPv6 che può soddisfare una richiesta client risponde con un messaggio di annuncio contenente gli indirizzi IPv6 che può assegnare al client, il tempo di lease degli indirizzi IPv6 e tutte le informazioni aggiuntive richieste dal client.</span><span class="sxs-lookup"><span data-stu-id="0b89b-118">A DHCPv6 Server that can service a Client request responds with an ADVERTISE message containing the IPv6 address(es) it can assign to the Client, the IPv6 address lease time and any additional information requested by the Client.</span></span> <span data-ttu-id="0b89b-119">Il protocollo client DHCPv6 richiede che il client attenda un periodo di tempo per la ricezione dei messaggi di annuncio da tutti i server DHCPv6 sulla rete.</span><span class="sxs-lookup"><span data-stu-id="0b89b-119">The DHCPv6 Client protocol requires the Client to wait for a period of time to receive ADVERTISE messages from all DHCPv6 Servers on the network.</span></span> <span data-ttu-id="0b89b-120">Pre-elabora ogni messaggio di annuncio come un messaggio valido e analizza i dati delle opzioni per i vari parametri DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="0b89b-120">It pre-processes each ADVERTISE message to be a valid message, and scans the option data for various DHCPv6 parameters.</span></span> <span data-ttu-id="0b89b-121">Verifica anche il valore preferenza nell'opzione preferenza, se fornita dal server.</span><span class="sxs-lookup"><span data-stu-id="0b89b-121">It also checks the Preference value in the Preference Option, if supplied by the Server.</span></span> <span data-ttu-id="0b89b-122">Se viene ricevuto più di un messaggio di annuncio, il client DHCPv6 NetX sceglie il server con il valore di preferenza più elevato ricevuto entro la fine del periodo di attesa.</span><span class="sxs-lookup"><span data-stu-id="0b89b-122">If more than one ADVERTISE message is received, the NetX DHCPv6 Client chooses the Server with the highest preference value received by the end of the wait period.</span></span>

<span data-ttu-id="0b89b-123">L'eccezione si verifica se il client riceve un messaggio di annuncio con un valore di preferenza pari a 255.</span><span class="sxs-lookup"><span data-stu-id="0b89b-123">The exception is if the Client receives an ADVERTISE message with a preference value of 255.</span></span> <span data-ttu-id="0b89b-124">Accetta immediatamente il messaggio e ignora tutti i messaggi di annuncio successivi.</span><span class="sxs-lookup"><span data-stu-id="0b89b-124">It accepts that message immediately and discards all subsequent ADVERTISE messages.</span></span>

<span data-ttu-id="0b89b-125">Il periodo di attesa viene definito come periodo di ritrasmissione che il client DHCPv6 attende prima di inviare un altro messaggio di SOLLECITAzione se non ha ricevuto una risposta da alcun server.</span><span class="sxs-lookup"><span data-stu-id="0b89b-125">The wait period is defined as the retransmission period that the DHCPv6 Client waits before sending another SOLICIT message if it has not received a response from any Server.</span></span> <span data-ttu-id="0b89b-126">Il timeout di ritrasmissione iniziale nello stato SOLLECITAzione viene definito da al protocollo DHCPv6 descritto in RFC 3315 come 1 secondo.</span><span class="sxs-lookup"><span data-stu-id="0b89b-126">The initial retransmission timeout in the SOLICIT state is defined by to the DHCPv6 protocol described in RFC 3315 to be 1 second.</span></span> <span data-ttu-id="0b89b-127">Gli intervalli di ritrasmissione successivi, se il client DHCPv6 non riesce a ricevere una risposta server valida, sono raddoppiati fino a un massimo di 120 secondi.</span><span class="sxs-lookup"><span data-stu-id="0b89b-127">Subsequent retransmission intervals, if the DHCPv6 Client fails to receive a valid Server response, are doubled up to a maximum of 120 seconds.</span></span>

<span data-ttu-id="0b89b-128">Dopo aver scelto il server, il client estrae i dati dal messaggio di annuncio e invia un messaggio di richiesta al server per accettare le informazioni relative all'indirizzo e i tempi di lease assegnati.</span><span class="sxs-lookup"><span data-stu-id="0b89b-128">Having chosen the Server, the Client extracts data from the ADVERTISE message and sends a REQUEST message back to the Server to accept the assigned address information and lease times.</span></span> <span data-ttu-id="0b89b-129">Il server risponde con un messaggio di risposta per verificare che gli indirizzi IPv6 del client siano registrati con il server come assegnati al client.</span><span class="sxs-lookup"><span data-stu-id="0b89b-129">The Server responds with a REPLY message to confirm the Client IPv6 address(es) are registered with the Server as assigned to the Client.</span></span>

<span data-ttu-id="0b89b-130">Il client DHCPv6 registra gli indirizzi IPv6 assegnati con l'istanza IP, ad esempio NetX Duo.</span><span class="sxs-lookup"><span data-stu-id="0b89b-130">The DHCPv6 Client registers the assigned IPv6 address(es) with the IP instance (e.g NetX Duo).</span></span> <span data-ttu-id="0b89b-131">Se è stato configurato per il protocollo di rilevamento degli indirizzi duplicati (DAD) (abilitato per impostazione predefinita), NetX Duo invierà automaticamente i messaggi di sollecito adiacenti per verificare che gli indirizzi assegnati siano univoci nella rete.</span><span class="sxs-lookup"><span data-stu-id="0b89b-131">If configured for the Duplicate Address Detection (DAD) protocol (enabled by default), NetX Duo will automatically send Neighbor Solicit messages to verify the assigned address(es) are unique on the network.</span></span> <span data-ttu-id="0b89b-132">In tal caso, viene inviata una notifica al client DHCPv6 quando ogni indirizzo assegnato è stato promosso da PROVVISORIo a valido.</span><span class="sxs-lookup"><span data-stu-id="0b89b-132">If so, it notifies the DHCPv6 Client when the each assigned address has been promoted from TENTATIVE to VALID.</span></span> <span data-ttu-id="0b89b-133">Il client DHCPv6 viene promosso allo stato associato e il dispositivo può utilizzare tale indirizzo IPv6 per inviare e trasmettere messaggi.</span><span class="sxs-lookup"><span data-stu-id="0b89b-133">The DHCPv6 Client is promoted to the BOUND state and the device may use that IPv6 address to send and transmit messages.</span></span> <span data-ttu-id="0b89b-134">Se il protocollo DAD ha esito negativo, NetX Duo invia una notifica al client DHCPv6 e il client DHCPv6 invia un messaggio di rifiuto per gli indirizzi IPv6 assegnati di nuovo al server e Reimposta lo stato del client DHCPv6 sullo stato INIT.</span><span class="sxs-lookup"><span data-stu-id="0b89b-134">If the DAD protocol fails, NetX Duo notifies the DHCPv6 Client and the DHCPv6 Client sends a DECLINE message for the IPv6 address(es) assigned back to the Server and resets the DHCPv6 Client state to the INIT state.</span></span>

### <a name="notification-of-successful-address-assignment-and-validation"></a><span data-ttu-id="0b89b-135">Notifica dell'assegnazione e della convalida degli indirizzi riuscita</span><span class="sxs-lookup"><span data-stu-id="0b89b-135">Notification of Successful Address Assignment and Validation</span></span>

<span data-ttu-id="0b89b-136">L'applicazione può determinare il risultato della richiesta di indirizzo del client DHCPv6 dalle modifiche di stato se il client DHCPv6 è configurato con il callback di modifica dello stato nel servizio *nx_dhcpv6_client_create* .</span><span class="sxs-lookup"><span data-stu-id="0b89b-136">The application can determine the result of the DHCPv6 Client address solicitation from the state changes if the DHCPv6 Client is configured with the state change callback in the *nx_dhcpv6_client_create* service.</span></span> <span data-ttu-id="0b89b-137">Se non riceve alcuna risposta dal server, la modifica dello stato osservato è da SOLLECITAzione a INIT.</span><span class="sxs-lookup"><span data-stu-id="0b89b-137">If it receives no response from the Server the state change observed is from SOLICIT to INIT.</span></span> <span data-ttu-id="0b89b-138">Se è stata ricevuta una risposta dal server, ma il server non è in grado di assegnare l'indirizzo, l'applicazione riceverà una notifica dal callback di errore del server client DHCPv6 se configurata con una (anche in *nx_dhcpv6_client_create).*</span><span class="sxs-lookup"><span data-stu-id="0b89b-138">If it received a response from the Server but the Server is unable to assign the address, the application will be notified by the DHCPv6 Client server error callback if configured with one (also in *nx_dhcpv6_client_create).*</span></span> <span data-ttu-id="0b89b-139">Se il client ha eseguito lo stato associato ma non ha superato il controllo padre, visualizzerà una modifica dello stato da BOUND a INIT.</span><span class="sxs-lookup"><span data-stu-id="0b89b-139">If the Client achieved the BOUND state but then failed the DAD check, it will see a state change from BOUND to INIT.</span></span> <span data-ttu-id="0b89b-140">Si noti che un'applicazione abilitata per papà deve attendere il controllo del padre dopo l'avvio del processo di richiesta.</span><span class="sxs-lookup"><span data-stu-id="0b89b-140">Note that an application that is enabled for DAD must allow time for the DAD check after starting the request process.</span></span> <span data-ttu-id="0b89b-141">Si tratta in genere di circa 400-500 di cicli (4-5 secondi nella maggior parte dei casi).</span><span class="sxs-lookup"><span data-stu-id="0b89b-141">Typically this is about 400-500 ticks (4-5 seconds in most cases).</span></span>

### <a name="relinquishing-an-ipv6-address"></a><span data-ttu-id="0b89b-142">Cessione di un indirizzo IPv6</span><span class="sxs-lookup"><span data-stu-id="0b89b-142">Relinquishing an IPv6 Address</span></span>

<span data-ttu-id="0b89b-143">Se e quando il client deve rilasciare un indirizzo IPv6 assegnato, informa il server DHCPv6 chiamando il servizio *nx_dhcpv6_request_release* :</span><span class="sxs-lookup"><span data-stu-id="0b89b-143">If and when the Client needs to release an assigned IPv6 address, it informs the DHCPv6 server by calling the *nx_dhcpv6_request_release* service:</span></span>

### <a name="uint-nx_dhcpv6_request_releasenx_dhcpv6-dhcpv6_ptr"></a><span data-ttu-id="0b89b-144">UINT nx_dhcpv6_request_release (NX_DHCPV6 \* dhcpv6_ptr)</span><span class="sxs-lookup"><span data-stu-id="0b89b-144">UINT nx_dhcpv6_request_release(NX_DHCPV6 \*dhcpv6_ptr)</span></span>

<span data-ttu-id="0b89b-145">Il client DHCPv6 invia un messaggio di rilascio unicast contenente gli indirizzi assegnati al server che ha assegnato l'indirizzo e attende una risposta confermando che il server ha ricevuto il messaggio.</span><span class="sxs-lookup"><span data-stu-id="0b89b-145">The DHCPv6 Client sends a unicast RELEASE message containing the assigned addresses to the Server who assigned the address and waits for a REPLY confirming the Server received the message.</span></span>

<span data-ttu-id="0b89b-146">Nota: è disponibile un processo diverso per il client che si accende ma prevede di continuare a usare gli indirizzi IPv6 assegnati al riavvio.</span><span class="sxs-lookup"><span data-stu-id="0b89b-146">Note: There is a different process for the Client that is powering down but plans to continue using the assigned IPv6 addresses on reboot.</span></span> <span data-ttu-id="0b89b-147">Non invia il messaggio di rilascio per l'accensione, a meno che non si preveda di richiedere un nuovo indirizzo all'accensione.</span><span class="sxs-lookup"><span data-stu-id="0b89b-147">It does not send the RELEASE message on powering down unless it plans to request a new address on power up.</span></span> <span data-ttu-id="0b89b-148">Per una spiegazione di questa situazione, vedere "requisiti di memoria non volatile".</span><span class="sxs-lookup"><span data-stu-id="0b89b-148">See “Non Volatile Memory Requirements” for explanation of this situation.</span></span>

### <a name="dhcpv6-lease-timeouts"></a><span data-ttu-id="0b89b-149">Timeout lease DHCPv6</span><span class="sxs-lookup"><span data-stu-id="0b89b-149">DHCPv6 Lease Timeouts</span></span>

<span data-ttu-id="0b89b-150">Il lease IPv6 assegnato dal server contiene due parametri di timeout, T1 e T2 in ogni blocco IANA (associazione di identità).</span><span class="sxs-lookup"><span data-stu-id="0b89b-150">The IPv6 lease assigned by the Server contains two timeout parameters, T1 and T2 in each Identity Association – Non Temporary Addresses (IANA) block.</span></span> <span data-ttu-id="0b89b-151">Una IANA è descritta in un'altra parte di questo manuale dell'utente.</span><span class="sxs-lookup"><span data-stu-id="0b89b-151">An IANA is described in elsewhere in this User Guide.</span></span> <span data-ttu-id="0b89b-152">Se il tempo trascorso dal momento in cui il client DHCPv6 è stato associato all'indirizzo IPv6 assegnato è uguale a T1, il client DHCPv6 inizia automaticamente a rinnovare l'indirizzo IPv6 inviando un messaggio di rinnovo.</span><span class="sxs-lookup"><span data-stu-id="0b89b-152">If the elapsed time from when the DHCPv6 Client was bound to the assigned IPv6 address equals T1, the DHCPv6 Client automatically starts renewing the IPv6 address by sending a RENEW message.</span></span> <span data-ttu-id="0b89b-153">Se il tempo trascorso è uguale a T2, il client DHCPv6 invia automaticamente un messaggio di riassociazione se non riceve risposte alle richieste di rinnovo.</span><span class="sxs-lookup"><span data-stu-id="0b89b-153">If the elapsed time equals T2, DHCPv6 Client automatically sends a REBIND message if it received no responses to its RENEW requests.</span></span>

<span data-ttu-id="0b89b-154">Altri due parametri di lease IPv6, la durata preferita e valida, vengono assegnati a ogni blocco di associazione di identità (IA) contenuto nel blocco IANA.</span><span class="sxs-lookup"><span data-stu-id="0b89b-154">Two other IPv6 lease parameters, preferred and valid lifetime, are assigned with each Identity Association (IA) block contained in the IANA block.</span></span> <span data-ttu-id="0b89b-155">Le durate preferite e valide si verificano quando l'indirizzo IPv6 assegnato è deprecato o non valido, rispettivamente.</span><span class="sxs-lookup"><span data-stu-id="0b89b-155">The preferred and valid lifetimes are when the assigned IPv6 address is deprecated or invalid, respectively.</span></span> <span data-ttu-id="0b89b-156">T1 deve essere inferiore alla durata preferita.</span><span class="sxs-lookup"><span data-stu-id="0b89b-156">T1 must be less than the preferred lifetime.</span></span> <span data-ttu-id="0b89b-157">T2 deve essere inferiore alla durata valida.</span><span class="sxs-lookup"><span data-stu-id="0b89b-157">T2 must be less than the valid lifetime.</span></span>

### <a name="ip-thread-task-requirements"></a><span data-ttu-id="0b89b-158">Requisiti per le attività dei thread IP</span><span class="sxs-lookup"><span data-stu-id="0b89b-158">IP Thread Task Requirements</span></span>

<span data-ttu-id="0b89b-159">Il client DHCPv6 NetX Duo richiede la creazione di un'istanza IP di NetX Duo precedente alla creazione del client DHCPv6 per l'uso dei servizi client DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="0b89b-159">The NetX Duo DHCPv6 Client requires creation of a NetX Duo IP instance previous to creating the DHCPv6 Client to use DHCPv6 Client services.</span></span>

<span data-ttu-id="0b89b-160">È necessario abilitare UDP, IPv6 e ICMPv6 nell'istanza IP prima di utilizzando il client DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="0b89b-160">UDP, IPv6, and ICMPv6 must be enabled on the IP instance prior to the using DHCPv6 Client.</span></span>

  - <span data-ttu-id="0b89b-161">*nx_udp_enable*</span><span class="sxs-lookup"><span data-stu-id="0b89b-161">*nx_udp_enable*</span></span>

  - <span data-ttu-id="0b89b-162">*nxd_ipv6_enable*</span><span class="sxs-lookup"><span data-stu-id="0b89b-162">*nxd_ipv6_enable*</span></span>

  - <span data-ttu-id="0b89b-163">*nxd_icmp_enable*</span><span class="sxs-lookup"><span data-stu-id="0b89b-163">*nxd_icmp_enable*</span></span>

### <a name="packet-pool-requirements"></a><span data-ttu-id="0b89b-164">Requisiti del pool di pacchetti</span><span class="sxs-lookup"><span data-stu-id="0b89b-164">Packet Pool Requirements</span></span>

<span data-ttu-id="0b89b-165">Per la creazione del client NetX Duo DHCPv6 è necessario un pool di pacchetti creato in precedenza per l'invio di messaggi DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="0b89b-165">NetX Duo DHCPv6 Client creation requires a previously created packet pool for sending DHCPv6 messages.</span></span> <span data-ttu-id="0b89b-166">Le dimensioni del pool di pacchetti in termini di payload del pacchetto e numero di pacchetti disponibili sono configurabili dall'utente e dipendono dal volume previsto di messaggi DHCPv6 e da altre trasmissioni che l'applicazione invierà.</span><span class="sxs-lookup"><span data-stu-id="0b89b-166">The size of the packet pool in terms of packet payload and number of packets available is user configurable, and depends on the anticipated volume of DHCPv6 messages and other transmissions the application will be sending.</span></span>

<span data-ttu-id="0b89b-167">Un messaggio DHCPv6 tipico è di circa 200 byte, a seconda del numero di indirizzi IA e delle opzioni DHCPv6 richiesti dal client.</span><span class="sxs-lookup"><span data-stu-id="0b89b-167">A typical DHCPv6 message is about 200 bytes depending on the number of IA addresses and DHCPv6 options requested by the Client.</span></span>

### <a name="network-requirements"></a><span data-ttu-id="0b89b-168">Requisiti di rete</span><span class="sxs-lookup"><span data-stu-id="0b89b-168">Network Requirements</span></span>

<span data-ttu-id="0b89b-169">Il client DHCPv6 NetX Duo richiede la creazione del socket UDP associato alla porta 546.</span><span class="sxs-lookup"><span data-stu-id="0b89b-169">The NetX Duo DHCPv6 Client requires the creation of UDP socket bound to port 546.</span></span> <span data-ttu-id="0b89b-170">Il socket viene creato quando viene creata l'attività client DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="0b89b-170">The socket is created when the DHCPv6 Client task is created.</span></span>

### <a name="non-volatile-memory-requirements"></a><span data-ttu-id="0b89b-171">Requisiti di memoria non volatili</span><span class="sxs-lookup"><span data-stu-id="0b89b-171">Non Volatile Memory Requirements</span></span>

<span data-ttu-id="0b89b-172">Se un client DHCPv6 rilascia il lease IPv6 con il server DHCPv6 quando si accende e richiede nuovi indirizzi IPv6 al riavvio, non è necessaria alcuna archiviazione di memoria non volatile.</span><span class="sxs-lookup"><span data-stu-id="0b89b-172">If a DHCPv6 Client releases its IPv6 lease with the DHCPv6 Server when powering down, and requests new IPv6 address(es) on reboot, then non volatile memory storage is not required.</span></span> <span data-ttu-id="0b89b-173">Se un client desidera continuare a utilizzare il lease assegnato, deve archiviare determinate informazioni sul client DHCPv6 sulla memoria non volatile tra i riavvii.</span><span class="sxs-lookup"><span data-stu-id="0b89b-173">If a Client wishes to continue using its assigned lease, it must store certain information about the DHCPv6 Client to non volatile memory across reboots.</span></span>

<span data-ttu-id="0b89b-174">I requisiti di memoria non volatili e l'API client DHCPv6 vengono descritti ulteriormente in **utilizzo del client Dhcpv6 NETX Duo** nel capitolo due.</span><span class="sxs-lookup"><span data-stu-id="0b89b-174">Non volatile memory requirements and the DHCPv6 Client API are discussed further in **Using the NetX Duo DHCPv6 Client** in Chapter Two.</span></span>

### <a name="netx-duo-dhcpv6-client-limitations"></a><span data-ttu-id="0b89b-175">Limitazioni client di NetX Duo DHCPv6</span><span class="sxs-lookup"><span data-stu-id="0b89b-175">NetX Duo DHCPv6 Client Limitations</span></span>

<span data-ttu-id="0b89b-176">La versione corrente del client NetX Duo DHCPv6 presenta le limitazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="0b89b-176">The current release of the NetX Duo DHCPv6 Client has the following limitations:</span></span>

  - <span data-ttu-id="0b89b-177">Il client NetX Duo DHCPv6 non supporta l'opzione unicast del server per l'invio di messaggi DHCPv6 unicast al server DHCPv6 anche se il server indica che questa operazione è consentita.</span><span class="sxs-lookup"><span data-stu-id="0b89b-177">NetX Duo DHCPv6 Client does not support the Server Unicast option for sending unicast DHCPv6 messages to the DHCPv6 Server even if the Server indicates this is permitted.</span></span>

  - <span data-ttu-id="0b89b-178">Il client NetX Duo DHCPv6 non supporta la richiesta di riconfigurazione in cui un server avvia le modifiche degli indirizzi IPv6 nei client della rete.</span><span class="sxs-lookup"><span data-stu-id="0b89b-178">NetX Duo DHCPv6 Client does not support the Reconfigure request in which a Server initiates IPv6 address changes to the Clients on the network.</span></span>

  - <span data-ttu-id="0b89b-179">Il client NetX Duo DHCPv6 non supporta il formato Enterprise per il blocco di controllo univoco dell'identificatore DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="0b89b-179">NetX Duo DHCPv6 Client does not support the Enterprise format for the DHCPv6 Unique Identifier control block.</span></span> <span data-ttu-id="0b89b-180">Supporta solo il livello di collegamento e il formato di collegamento più tempo.</span><span class="sxs-lookup"><span data-stu-id="0b89b-180">It only supports Link Layer and Link Layer Plus Time format.</span></span>

  - <span data-ttu-id="0b89b-181">Il client NetX Duo DHCPv6 non supporta le richieste di indirizzi di associazione temporanea (TA), ma supporta le richieste di opzioni non temporanee (IANA).</span><span class="sxs-lookup"><span data-stu-id="0b89b-181">NetX Duo DHCPv6 Client does not support Temporary Association (TA) address requests, but does support Non Temporary (IANA) option requests.</span></span>

## <a name="multihome-and-multiple-address-support"></a><span data-ttu-id="0b89b-182">Supporto multihome e indirizzi multipli</span><span class="sxs-lookup"><span data-stu-id="0b89b-182">Multihome and Multiple Address Support</span></span>

<span data-ttu-id="0b89b-183">Il client DHCPv6 supporta più interfacce e più indirizzi per interfaccia.</span><span class="sxs-lookup"><span data-stu-id="0b89b-183">The DHCPv6 Client supports multiple interfaces and multiple addresses per interface.</span></span> <span data-ttu-id="0b89b-184">Il servizio client DHCPv6, *nx_dhcpv6_client_set_interface* consente all'applicazione client di impostare l'interfaccia di rete in cui l'applicazione comunicherà con il server DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="0b89b-184">The DHCPv6 Client service, *nx_dhcpv6_client_set_interface* enables the Client application to set the network interface on which the application will be communicating with the DHCPv6 Server.</span></span> <span data-ttu-id="0b89b-185">Il client DHCPv6 imposta come valore predefinito l'interfaccia primaria (indice zero).</span><span class="sxs-lookup"><span data-stu-id="0b89b-185">The DHCPv6 Client defaults to the primary interface (index zero).</span></span>

<span data-ttu-id="0b89b-186">Per più indirizzi per interfaccia, il client DHCPv6 mantiene un elenco interno di indirizzi a partire dall'indice 0.</span><span class="sxs-lookup"><span data-stu-id="0b89b-186">For multiple addresses per interface, the DHCPv6 Client keeps an internal list of addresses starting at index 0.</span></span> <span data-ttu-id="0b89b-187">Si noti che lo stesso indirizzo registrato con il client DHCPv6 potrebbe non trovarsi necessariamente nello stesso indice nella tabella IP degli indirizzi di interfaccia.</span><span class="sxs-lookup"><span data-stu-id="0b89b-187">Note that the same address registered with the DHCPv6 Client may not necessarily be located at the same index in the IP table of interface addresses.</span></span>

<span data-ttu-id="0b89b-188">Per i servizi client DHCPv6 che recuperano informazioni sul lease di indirizzi IPv6 client, alcuni richiedono che venga specificato un indice di indirizzo.</span><span class="sxs-lookup"><span data-stu-id="0b89b-188">For DHCPv6 Client services that retrieve information about the Client IPv6 address lease, some require an address index to be specified.</span></span> <span data-ttu-id="0b89b-189">Di seguito è riportato un esempio per ottenere la durata preferita e valida:</span><span class="sxs-lookup"><span data-stu-id="0b89b-189">An example for obtaining the preferred and valid lifetimes is shown below:</span></span>

```C
UINT nx_dhcpv6_get_valid_ip_address_lease_time(NX_DHCPV6 *dhcpv6_ptr, 
                                              UINT address_index, 
                                              NXD_ADDRESS *ip_address,
                                              ULONG preferred_lifetime, 
                                              ULONG *valid_lifetime)
```

<span data-ttu-id="0b89b-190">L'applicazione client può anche recuperare il numero di indirizzi IPv6 validi assegnati dal servizio *nx_dhcpv6_get_valid_ip_address_count* :</span><span class="sxs-lookup"><span data-stu-id="0b89b-190">The Client application can also retrieve the number of valid IPv6 addresses assigned from the *nx_dhcpv6_get_valid_ip_address_count* service:</span></span>

```C
UINT nx_dhcpv6_get_valid_ip_address_count(NX_DHCPV6 *dhcpv6_ptr, 
                                          UINT *address_count)
```

<span data-ttu-id="0b89b-191">I servizi client DHCPv6 legacy creati prima del supporto di più indirizzi in NetX Duo non accettano un indice di indirizzo.</span><span class="sxs-lookup"><span data-stu-id="0b89b-191">Legacy DHCPv6 Client services which were created before multiple addresses were supported in NetX Duo do not take an address index.</span></span> <span data-ttu-id="0b89b-192">Con questi servizi, quindi, i dati richiesti vengono ricavati dall'indirizzo globale IA primario, indipendentemente dal numero di indirizzi IA assegnati al client.</span><span class="sxs-lookup"><span data-stu-id="0b89b-192">Therefore, with these services, the data requested is taken from the primary global IA address, regardless how many IA addresses are assigned to the Client.</span></span> <span data-ttu-id="0b89b-193">Di seguito è riportato un esempio:</span><span class="sxs-lookup"><span data-stu-id="0b89b-193">An example is shown below:</span></span>

```C
UINT nx_dhcpv6_get_IP_address(NX_DHCPV6 *dhcpv6_ptr, 
                              NXD_ADDRESS *ip_address)
```

## <a name="netx-duo-dhcpv6-client-callback-functions"></a><span data-ttu-id="0b89b-194">Funzioni di callback del client DHCPv6 NetX Duo</span><span class="sxs-lookup"><span data-stu-id="0b89b-194">NetX Duo DHCPv6 Client Callback Functions</span></span>

<span data-ttu-id="0b89b-195">*nx_dhcpv6_state_change_callback*</span><span class="sxs-lookup"><span data-stu-id="0b89b-195">*nx_dhcpv6_state_change_callback*</span></span>

<span data-ttu-id="0b89b-196">Quando il client DHCPv6 passa a un nuovo stato DHCPv6 come risultato dell'elaborazione di una richiesta DHCPv6, invia una notifica all'applicazione con questa funzione di callback.</span><span class="sxs-lookup"><span data-stu-id="0b89b-196">When the DHCPv6 Client changes to a new DHCPv6 state as a result of processing a DHCPv6 request, it notifies the application with this callback function.</span></span>

<span data-ttu-id="0b89b-197">*nx_dhcpv6_server_error_handler*</span><span class="sxs-lookup"><span data-stu-id="0b89b-197">*nx_dhcpv6_server_error_handler*</span></span>

<span data-ttu-id="0b89b-198">Quando il client DHCPv6 riceve una risposta del server contenente un'opzione di *stato* con uno stato diverso da zero (non riuscito), invia una notifica all'applicazione con questo callback che include il codice di stato di errore del server.</span><span class="sxs-lookup"><span data-stu-id="0b89b-198">When the DHCPv6 Client receives a Server reply containing a *Status* option with a non-zero (non successful) status, it notifies the application with this callback which includes the Server error status code.</span></span>

<span data-ttu-id="0b89b-199">Nota: poiché queste funzioni di callback vengono chiamate dall'attività thread del client DHCPv6, l'applicazione client non deve chiamare alcun servizio client DHCPv6 NetX duo che richiede il controllo mutex del client DHCPv6, ad esempio *nx_dhcpv6_start, nx_dhcpv6_stop* e qualsiasi API che invii messaggi direttamente dal callback, ad esempio *nx_dhcpv6_request_release*.</span><span class="sxs-lookup"><span data-stu-id="0b89b-199">Note: Since these callback functions are called from the DHCPv6 Client thread task, the Client application must NOT call any NetX Duo DHCPv6 Client services that require mutex control of the DHCPv6 Client such as *nx_dhcpv6_start, nx_dhcpv6_stop,* and any of the API that send messages directly from the callback e.g. *nx_dhcpv6_request_release*.</span></span>

## <a name="dhcpv6-rfcs"></a><span data-ttu-id="0b89b-200">RFC DHCPv6</span><span class="sxs-lookup"><span data-stu-id="0b89b-200">DHCPv6 RFCs</span></span>

<span data-ttu-id="0b89b-201">Il protocollo DHCP di NetX Duo è compatibile con RFC3315, RFC3646 e RFC correlati.</span><span class="sxs-lookup"><span data-stu-id="0b89b-201">NetX Duo DHCP is compliant with RFC3315, RFC3646, and related RFCs.</span></span>