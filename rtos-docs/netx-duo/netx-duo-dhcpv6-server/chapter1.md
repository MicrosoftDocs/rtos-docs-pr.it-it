---
title: Capitolo 1-Introduzione al server DHCPv6 di Azure RTO NetX Duo
description: Questo documento illustra in dettaglio il modo in cui il server DHCPv6 NetX Duo assegna gli indirizzi IPv6 ai client DHCPv6.
author: philmea
ms.author: philmea
ms.date: 06/08/2020
ms.topic: article
ms.service: rtos
ms.openlocfilehash: 6cf7baa91b1804876b97b1d75d1872d1120ad028
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/22/2021
ms.locfileid: "104821947"
---
# <a name="chapter-1---introduction-to-azure-rtos-netx-duo-dhcpv6-server"></a><span data-ttu-id="eb361-103">Capitolo 1-Introduzione al server DHCPv6 di Azure RTO NetX Duo</span><span class="sxs-lookup"><span data-stu-id="eb361-103">Chapter 1 - Introduction to Azure RTOS NetX Duo DHCPv6 server</span></span>

<span data-ttu-id="eb361-104">Nelle reti IPv6 DHCPv6is richiede che i client ottengano gli indirizzi IPv6.</span><span class="sxs-lookup"><span data-stu-id="eb361-104">In IPv6 networks, DHCPv6is required for Clients to obtain IPv6 addresses.</span></span> <span data-ttu-id="eb361-105">Non sostituisce DHCP, che è limitato al protocollo IPv4, che non offre indirizzi IPv4.</span><span class="sxs-lookup"><span data-stu-id="eb361-105">It does not replace DHCP which is limited to IPv4in that it does not offer IPv4 addresses.</span></span> <span data-ttu-id="eb361-106">DHCPv6 presenta funzionalità simili a DHCP, oltre a molti miglioramenti.</span><span class="sxs-lookup"><span data-stu-id="eb361-106">DHCPv6 has similar features to DHCP as well as many enhancements.</span></span> <span data-ttu-id="eb361-107">Un client che non è in grado di utilizzare la configurazione automatica degli indirizzi senza stato IPv6 può utilizzare DHCPv6 per l'assegnazione di un indirizzo IPv6 globale univoco da un server DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="eb361-107">A Client who does not or cannot use IPv6 stateless address auto-configuration can use DHCPv6 to be assigned a unique global IPv6 address from a DHCPv6 Server.</span></span>

<span data-ttu-id="eb361-108">NetX Duo è stato sviluppato per supportare applicazioni basate su rete IPv6 e protocolli di rete, ad esempio DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="eb361-108">NetX Duo was developed to support IPv6 network based applications and network protocols such as DHCPv6.</span></span> <span data-ttu-id="eb361-109">Questo documento illustra in dettaglio il modo in cui il server DHCPv6 NetX Duo assegna gli indirizzi IPv6 ai client DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="eb361-109">This document will explain in detail how the NetX Duo DHCPv6 Server assigns IPv6 addresses to DHCPv6 Clients.</span></span>

## <a name="dhcpv6-communication"></a><span data-ttu-id="eb361-110">Comunicazione DHCPv6</span><span class="sxs-lookup"><span data-stu-id="eb361-110">DHCPv6 Communication</span></span>

<span data-ttu-id="eb361-111">**Struttura del messaggio DHCPv6**</span><span class="sxs-lookup"><span data-stu-id="eb361-111">**DHCPv6 Message structure**</span></span>

<span data-ttu-id="eb361-112">Il contenuto del messaggio è fondamentalmente un'intestazione del messaggio seguita da uno o più blocchi di opzioni (di solito più).</span><span class="sxs-lookup"><span data-stu-id="eb361-112">Message content is basically a message header followed by one or more (usually more) option blocks.</span></span> <span data-ttu-id="eb361-113">Di seguito è riportata la struttura di base in cui ogni blocco rappresenta un byte:</span><span class="sxs-lookup"><span data-stu-id="eb361-113">Below is the basic structure where each block represents one byte:</span></span>

![Diagramma che mostra la struttura del blocco di messaggi e opzioni di DHCPv6.](media/image2.jpg)

<span data-ttu-id="eb361-115">**Figura 1. Struttura del blocco di messaggi e opzioni DHCPv6**</span><span class="sxs-lookup"><span data-stu-id="eb361-115">**Figure 1. DHCPv6 message and option block structure**</span></span>

<span data-ttu-id="eb361-116">Il campo Msg-Type a 1 byte indica il tipo di messaggio DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="eb361-116">The 1-byte Msg-Type field indicates the type of DHCPv6 message.</span></span> <span data-ttu-id="eb361-117">Il campo Transaction-ID di 3 byte viene impostato dal client.</span><span class="sxs-lookup"><span data-stu-id="eb361-117">The 3-byte Transaction-ID field is set by the Client.</span></span> <span data-ttu-id="eb361-118">Può essere utilizzata da qualsiasi sequenza di caratteri, ma deve essere univoca per ogni messaggio client al server (conformemente ai messaggi duplicati inviati dal client).</span><span class="sxs-lookup"><span data-stu-id="eb361-118">It can by any sequence of characters but must be unique for each Client message to the Server (conserved across duplicate messages sent by the Client).</span></span> <span data-ttu-id="eb361-119">Il server utilizza tale ID di transazione per ogni risposta al client per consentire al client di associare i messaggi del server in caso di pacchetti ritardati o eliminati in rete.</span><span class="sxs-lookup"><span data-stu-id="eb361-119">The Server uses that Transaction-ID for each response to the Client to enable the Client to match up Server messages in the event of packets that are delayed or dropped on the network.</span></span> <span data-ttu-id="eb361-120">Dopo il campo Transaction-ID sono disponibili una o più opzioni DHCPv6 per indicare le richieste del client.</span><span class="sxs-lookup"><span data-stu-id="eb361-120">Following the Transaction-ID field, are one or more DHCPv6 options used to indicate what the Client is requesting.</span></span>

<span data-ttu-id="eb361-121">La struttura dell'opzione DHCPv6 è costituita da un codice di opzione, un campo di lunghezza delle opzioni, che non include i campi lunghezza o codice, e infine i dati di opzione stessi che corrispondono a uno o più campi di codice opzione a 2 byte per i dati richiesti dal client.</span><span class="sxs-lookup"><span data-stu-id="eb361-121">The DHCPv6 option structure is composed of an option code, an option length field, which does not include the length or code fields, and finally the option data itself which is one or more 2 byte option code fields for the data the Client is requesting.</span></span>

<span data-ttu-id="eb361-122">Alcuni blocchi di opzioni hanno opzioni nidificate.</span><span class="sxs-lookup"><span data-stu-id="eb361-122">Some option blocks have nested options.</span></span> <span data-ttu-id="eb361-123">Ad esempio, un' *associazione di identità per l'opzione di indirizzo non temporaneo (IANA)* contiene una o più opzioni di *associazione di identità (IA)* per richiedere indirizzi IPv6.</span><span class="sxs-lookup"><span data-stu-id="eb361-123">For example, an *Identity Association for Non Temporary Address (IANA)* option contains one or more *Identity Association (IA)* options to request IPv6 addresses.</span></span> <span data-ttu-id="eb361-124">L'opzione *IANA* restituita nel messaggio di risposta del server contiene le stesse opzioni *Ia* (s) con l'indirizzo IPv6 e i tempi di lease concessi dal server, oltre a un'opzione di *stato* che indica se si è verificato un errore con la richiesta di indirizzo client.</span><span class="sxs-lookup"><span data-stu-id="eb361-124">The *IANA* option returned in the Server Reply message contains the same *IA* option(s) with the IPv6 address and lease times granted by the Server, as well as a *Status* option indicating if there is an error with the Client address request.</span></span>

<span data-ttu-id="eb361-125">Nell' **appendice a** è disponibile un elenco di tutti i blocchi di opzioni e la relativa descrizione.</span><span class="sxs-lookup"><span data-stu-id="eb361-125">A list of all option blocks and their description is provided in **Appendix A**.</span></span>

<span data-ttu-id="eb361-126">**Tipi di messaggio DHCPv6**</span><span class="sxs-lookup"><span data-stu-id="eb361-126">**DHCPv6 Message Types**</span></span>

<span data-ttu-id="eb361-127">Sebbene DHCPv6 rafforzi significativamente la funzionalità di DHCP, USA lo stesso numero di messaggi di DHCP e supporta le stesse opzioni del fornitore di DHCP.</span><span class="sxs-lookup"><span data-stu-id="eb361-127">Although DHCPv6 greatly enhances the functionality of DHCP, it uses the same number of messages as DHCP and supports the same vendor options as DHCP.</span></span> <span data-ttu-id="eb361-128">L'elenco dei messaggi DHCPv6 è il seguente:</span><span class="sxs-lookup"><span data-stu-id="eb361-128">The list of DHCPv6 messages are as follows:</span></span>

- <span data-ttu-id="eb361-129">SOLICT (1) (inviato dal client)</span><span class="sxs-lookup"><span data-stu-id="eb361-129">SOLICT (1) (sent by Client)</span></span>
- <span data-ttu-id="eb361-130">ANNUNCIO (2) (inviato dal server)</span><span class="sxs-lookup"><span data-stu-id="eb361-130">ADVERTISE (2) (sent by Server)</span></span>
- <span data-ttu-id="eb361-131">REQUEST (3) (inviato dal client)</span><span class="sxs-lookup"><span data-stu-id="eb361-131">REQUEST (3) (sent by Client)</span></span>
- <span data-ttu-id="eb361-132">Rispondi (7) (inviato dal server)</span><span class="sxs-lookup"><span data-stu-id="eb361-132">REPLY (7) (sent by Server)</span></span>
- <span data-ttu-id="eb361-133">CONFERMA (4) (inviato dal client)</span><span class="sxs-lookup"><span data-stu-id="eb361-133">CONFIRM (4) (sent by Client)</span></span>
- <span data-ttu-id="eb361-134">RINNOVO (5) (inviato dal client)</span><span class="sxs-lookup"><span data-stu-id="eb361-134">RENEW (5) (sent by Client)</span></span>
- <span data-ttu-id="eb361-135">Riassocia (6) (inviato dal client)</span><span class="sxs-lookup"><span data-stu-id="eb361-135">REBIND (6) (sent by Client)</span></span>
- <span data-ttu-id="eb361-136">VERSIONE (8) (inviata dal client)</span><span class="sxs-lookup"><span data-stu-id="eb361-136">RELEASE (8) (sent by Client)</span></span>
- <span data-ttu-id="eb361-137">RIFIUTARE (9) (inviato dal client)</span><span class="sxs-lookup"><span data-stu-id="eb361-137">DECLINE (9) (sent by Client)</span></span>
- <span data-ttu-id="eb361-138">INFORM_REQUEST (11) (inviato dal client)</span><span class="sxs-lookup"><span data-stu-id="eb361-138">INFORM_REQUEST (11) (sent by Client)</span></span>
- <span data-ttu-id="eb361-139">Riconfigura \* (10) (inviato dal server)</span><span class="sxs-lookup"><span data-stu-id="eb361-139">RECONFIGURE\* (10) (sent by Server)</span></span>

<span data-ttu-id="eb361-140">\* RECONFIGURE non è supportato dal server NetX Duo DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="eb361-140">\*RECONFIGURE is not supported by the NetX Duo DHCPv6 Server.</span></span>

<span data-ttu-id="eb361-141">La sequenza di richieste DHCPv6 di base, con il tipo di messaggio estensione DHCPv4 equivalente tra parentesi, è la seguente:</span><span class="sxs-lookup"><span data-stu-id="eb361-141">The basic DHCPv6 request sequence, with the equivalent DHCPv4 message type in parenthesis, is as follows:</span></span>

<span data-ttu-id="eb361-142">Client \***sollecita** _ (_Discovery *) **annuncio** Server (* offerta *) **richiesta** client*(richiesta *) **risposta** server*(DHCPACK \*)</span><span class="sxs-lookup"><span data-stu-id="eb361-142">Client ***Solicit** _ (_Discovery *) Server **Advertisement** (* Offer *) Client **Request** (* Request *) Server **Reply** (* DHCPAck*)</span></span>

<span data-ttu-id="eb361-143">**Risposta** server di **rinnovo**(stessa) del client (*DHCPACK*)</span><span class="sxs-lookup"><span data-stu-id="eb361-143">Client **Renew**(same) Server **Reply** (*DHCPAck*)</span></span>

## <a name="dhcpv6-message-validation"></a><span data-ttu-id="eb361-144">Convalida del messaggio DHCPv6</span><span class="sxs-lookup"><span data-stu-id="eb361-144">DHCPv6 Message Validation</span></span>

<span data-ttu-id="eb361-145">ID transazione: il client deve generare un ID transazione per ogni messaggio inviato al server.</span><span class="sxs-lookup"><span data-stu-id="eb361-145">Transaction ID: The Client must generate a transaction ID for each message it sends to the Server.</span></span> <span data-ttu-id="eb361-146">Il server DHCPv6 rifiuterà tutti i messaggi provenienti dal client che non corrispondono a questo ID transazione.</span><span class="sxs-lookup"><span data-stu-id="eb361-146">The DHCPv6 Server will reject any message from the Client not matching this transaction ID.</span></span> <span data-ttu-id="eb361-147">Il server deve a sua volta utilizzare lo stesso ID transazione nelle risposte al client.</span><span class="sxs-lookup"><span data-stu-id="eb361-147">The Server in turn must use the same transaction ID in its responses back to the Client.</span></span>

<span data-ttu-id="eb361-148">**Identificatori univoci di DHCPv6 (Duid)**</span><span class="sxs-lookup"><span data-stu-id="eb361-148">**DHCPv6 unique Identifiers (DUIDs)**</span></span>

<span data-ttu-id="eb361-149">Tutti i messaggi server devono includere anche un identificatore univoco DHCPv6 (DUID) in ogni messaggio oppure il client DHCPv6 non deve accettare il messaggio.</span><span class="sxs-lookup"><span data-stu-id="eb361-149">All Server messages must also include a DHCPv6 unique Identifier (DUID) in each message or the DHCPv6 Client should not accept the message.</span></span> <span data-ttu-id="eb361-150">Un DUID di collegamento è un blocco di controllo che contiene l'indirizzo MAC client, il tipo di hardware e il tipo DUID.</span><span class="sxs-lookup"><span data-stu-id="eb361-150">A Link Layer (LL) DUID is a control block containing client MAC address, hardware type, and DUID type.</span></span> <span data-ttu-id="eb361-151">Un DUID LLT (link layer Time) contiene anche un campo temporale che consente di ridurre le probabilità che DUID non sia univoco nella rete host.</span><span class="sxs-lookup"><span data-stu-id="eb361-151">A Link Layer Time (LLT) DUID additionally contains a time field which decreases the chances the DUID will not be unique on the host network.</span></span> <span data-ttu-id="eb361-152">Per questo motivo, RFC 3315 consiglia LLT Duid over LL Duid.</span><span class="sxs-lookup"><span data-stu-id="eb361-152">For that reason RFC 3315 recommends LLT DUIDs over LL DUIDs.</span></span> <span data-ttu-id="eb361-153">Se l'applicazione host non crea il proprio valore di ora univoco, NetX Duo DHCPv6 ne fornirà uno predefinito.</span><span class="sxs-lookup"><span data-stu-id="eb361-153">If the host application does not create its own unique time value, NetX Duo DHCPv6 will provide a default one.</span></span> <span data-ttu-id="eb361-154">Il terzo tipo di DUID è il DUID Enterprise (Vendor assegnato) che contiene un ID Enterprise registrato, come registrato con IANA, e dati privati variabili nel tipo e nella lunghezza, ad esempio in base alle dimensioni della memoria, al tipo di sistema operativo di altre configurazioni hardware.</span><span class="sxs-lookup"><span data-stu-id="eb361-154">The third type of DUID is the Enterprise (Vendor assigned) DUID which contains a registered Enterprise ID (as in registered with IANA) and private data that is variable in type and length e.g. based on memory size, operating system type of other hardware configuration.</span></span> <span data-ttu-id="eb361-155">Vedere l'elenco delle opzioni di configurazione in un altro punto del documento per configurare i valori di ID privati e assegnati del fornitore del server.</span><span class="sxs-lookup"><span data-stu-id="eb361-155">See the list of Configuration Options elsewhere in this document for setting up the Server vendor assigned and private ID values.</span></span>

<span data-ttu-id="eb361-156">Il client deve inoltre includere i relativi DUID nei messaggi al server, ad eccezione di INFORM_REQUEST, oppure il server li rifiuterà.</span><span class="sxs-lookup"><span data-stu-id="eb361-156">The Client must also include its DUID in its messages to the Server except for INFORM_REQUEST, or the Server will reject them.</span></span>

<span data-ttu-id="eb361-157">**Sessioni del server client DHCPv6**</span><span class="sxs-lookup"><span data-stu-id="eb361-157">**DHCPv6 Client Server Sessions**</span></span>

<span data-ttu-id="eb361-158">I client e i server DHCPv6 scambiano messaggi tramite UDP.</span><span class="sxs-lookup"><span data-stu-id="eb361-158">DHCPv6 Clients and Servers exchange messages over UDP.</span></span> <span data-ttu-id="eb361-159">Il client utilizza la porta 546 per inviare e ricevere messaggi DHCPv6 e il server utilizza la porta 547.</span><span class="sxs-lookup"><span data-stu-id="eb361-159">The Client uses port 546 to send and receive DHCPv6 messages and the Server uses port 547.</span></span> <span data-ttu-id="eb361-160">Inizialmente il client usa l'indirizzo locale del collegamento per la trasmissione e la ricezione di messaggi DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="eb361-160">The Client initially uses its link-local address for transmitting and receiving DHCPv6 messages.</span></span> <span data-ttu-id="eb361-161">Invia tutti i messaggi ai server DHCPv6 usando un indirizzo multicast riservato con ambito collegamento noto come indirizzo multicast *All_DHCP_Relay_Agents_and_Servers* *(FF02:: 01:02)*.</span><span class="sxs-lookup"><span data-stu-id="eb361-161">It sends all messages to DHCPv6 servers using a reserved, link-scoped multicast address known as the *All_DHCP_Relay_Agents_and_Servers* multicast address *(FF02::01:02)*.</span></span>

<span data-ttu-id="eb361-162">Richieste di assegnazione di indirizzi ForIPv6, il server DHCPv6 è in ascolto dei messaggi di *sollecito* inviati all'indirizzo *All_DHCP_Relay_Agents_and_Servers* .</span><span class="sxs-lookup"><span data-stu-id="eb361-162">ForIPv6 address assignment requests, the DHCPv6 Server listens for *Solicit* messages sent to the *All_DHCP_Relay_Agents_and_Servers* address.</span></span> <span data-ttu-id="eb361-163">Nella richiesta di *sollecitazione* il client può richiedere l'assegnazione di un indirizzo IPv6 specifico o consentire al server di sceglierne una.</span><span class="sxs-lookup"><span data-stu-id="eb361-163">In the *Solicit* request, the Client can request the assignment of specific IPv6 address or let the Server choose one.</span></span> <span data-ttu-id="eb361-164">Può anche richiedere altre informazioni sulla configurazione di rete dal server.</span><span class="sxs-lookup"><span data-stu-id="eb361-164">It can also request other network configuration information from the Server.</span></span>

<span data-ttu-id="eb361-165">Se il DHCPv6Server estrae un messaggio di *sollecitazione* valido e può assegnare un indirizzo IPv6 al client, risponde con un messaggio di *annuncio* che contiene l'indirizzo IPv6 che verrà concesso al client, il tempo di lease degli indirizzi IPv6 ed eventuali informazioni aggiuntive richieste dal client.</span><span class="sxs-lookup"><span data-stu-id="eb361-165">If the DHCPv6Server extracts a valid *Solicit* message and can assign an IPv6 address to the Client, it responds with an *Advertise* message containing the IPv6 address it will grant to the Client, the IPv6 address lease time and any additional information requested by the Client.</span></span> <span data-ttu-id="eb361-166">Se il client accetta l'offerta server risponde con un messaggio di *richiesta* che informa il server che l'indirizzo IPv6 verrà accettato.</span><span class="sxs-lookup"><span data-stu-id="eb361-166">If the Client accepts the Server offer it responds with a *Request* message letting the Server know it will accept the IPv6 address.</span></span> <span data-ttu-id="eb361-167">Il server conferma che il client è associato all'indirizzo IPv6 con un messaggio di *risposta* .</span><span class="sxs-lookup"><span data-stu-id="eb361-167">The Server confirms the Client is bound to the IPv6 address with a *Reply* message.</span></span>

<span data-ttu-id="eb361-168">Se il messaggio DHCPv6 del client non è valido, il server ignorerà il messaggio automaticamente.</span><span class="sxs-lookup"><span data-stu-id="eb361-168">If the Client DHCPv6 message is invalid, the Server will discard the message silently.</span></span> <span data-ttu-id="eb361-169">Se il server non è in grado di concedere la richiesta, invierà un messaggio di *risposta* con un'indicazione del problema nel campo stato dell'opzione indirizzo IP IANA.</span><span class="sxs-lookup"><span data-stu-id="eb361-169">If the Server is unable to grant the request it will send a *Reply* message with an indication of the problem in the status field of the IP address IANA option.</span></span> <span data-ttu-id="eb361-170">Se vengono ricevute richieste client duplicate, il server invia nuovamente la risposta DHCPv6 precedente, supponendo che il client non abbia ricevuto semplicemente il pacchetto.</span><span class="sxs-lookup"><span data-stu-id="eb361-170">If duplicate Client requests are received the Server resends its previous DHCPv6 response, assuming the Client simply did not receive the packet.</span></span>

<span data-ttu-id="eb361-171">Il client verifica che l'indirizzo IPv6 assegnato dal server non sia assegnato a un altro host nel sistema utilizzando diversi protocolli IPv6, ad esempio il rilevamento di indirizzi duplicati.</span><span class="sxs-lookup"><span data-stu-id="eb361-171">It is up to the Client to verify that its assigned IPv6 address from the Server is not assigned to another host on the system by using various IPv6 protocols such as Duplicate Address Detection.</span></span> <span data-ttu-id="eb361-172">Se l'indirizzo non è univoco, il client invierà al server un messaggio di *rifiuto* .</span><span class="sxs-lookup"><span data-stu-id="eb361-172">If the address is not unique, the Client will send the Server a *Decline* message.</span></span> <span data-ttu-id="eb361-173">Il server aggiorna la tabella di lease IP con queste informazioni, registrando che l'indirizzo è già assegnato.</span><span class="sxs-lookup"><span data-stu-id="eb361-173">The Server updates its IP lease table with this information, recording that the address is already assigned.</span></span> <span data-ttu-id="eb361-174">Nel frattempo il client deve riavviare il processo di richiesta DHCPv6 con un altro messaggio di *sollecitazione* .</span><span class="sxs-lookup"><span data-stu-id="eb361-174">Meanwhile the Client must restart the DHCPv6 request process with another *Solicit* message.</span></span>

<span data-ttu-id="eb361-175">Oltre a un indirizzo IPv6, è probabile che un client conosca anche il server DNS e possibilmente altre informazioni di rete, ad esempio il nome di dominio di rete.</span><span class="sxs-lookup"><span data-stu-id="eb361-175">In addition to an IPv6 address, a Client will likely also need to know the DNS server and possibly other network information such as the network domain name.</span></span> <span data-ttu-id="eb361-176">DHCPv6 fornisce i mezzi per richiedere queste informazioni tramite l'utilizzo delle richieste di opzioni nei messaggi *di richiesta e* *richiesta* o separatamente nei messaggi di *richiesta di informazioni* .</span><span class="sxs-lookup"><span data-stu-id="eb361-176">DHCPv6 provides the means to request this information using either the use of Option Requests in the *Solicit* and *Request* messages, or separately in *Information Request* messages.</span></span> <span data-ttu-id="eb361-177">Le opzioni di DHCPv6 sono illustrate più avanti in questo capitolo.</span><span class="sxs-lookup"><span data-stu-id="eb361-177">DHCPv6 options are explained later in this chapter.</span></span>

<span data-ttu-id="eb361-178">**Durata lease IPv6**</span><span class="sxs-lookup"><span data-stu-id="eb361-178">**IPv6 Lease Duration**</span></span>

<span data-ttu-id="eb361-179">Quando il server concede un indirizzo IPv6 a un client, assegna anche la durata del lease (Lifetime) nell'opzione IANA per quando consiglia al client di avviare il rinnovo (T1) o il riassociazione (T2) del relativo indirizzo IPv6 usando il *rinnovo* e la *riassociazione dei messaggi* .</span><span class="sxs-lookup"><span data-stu-id="eb361-179">When the Server grants an IPv6 address to a Client, it also assigns the lease duration (lifetime)in the IANA option for when it recommends the Client to start renewing (T1) or rebinding (T2) its IPv6 address using *Renew* and *Rebind* messages.</span></span> <span data-ttu-id="eb361-180">La differenza tra i due è che il client indirizza il messaggio di *rinnovo* al server includendo il server Duid nella richiesta di *rinnovo* .</span><span class="sxs-lookup"><span data-stu-id="eb361-180">The difference between the two is the Client directs the *Renew* message to the Server by including the Server DUID in the *Renew* request.</span></span> <span data-ttu-id="eb361-181">Tuttavia, non specifica alcun server, quindi non include un server DUID nel messaggio di *riassociazione* all'indirizzo del *All_DHCP_Relay_Agents_and_Servers* .</span><span class="sxs-lookup"><span data-stu-id="eb361-181">However, it does not specify any server, and hence does not include a Server DUID, in the *Rebind* message to the *All_DHCP_Relay_Agents_and_Servers* address.</span></span> <span data-ttu-id="eb361-182">L'opzione IA che contiene l'indirizzo IPv6 effettivo concesso dal server al client contiene anche le durate preferite e valide quando l'indirizzo IPv6 con lease diventa deprecato o obsoleto (non valido), rispettivamente.</span><span class="sxs-lookup"><span data-stu-id="eb361-182">The IA option which contains the actual IPv6 address the Server grants the Client also contains the preferred and valid lifetimes when the leased IPv6 address becomes deprecated or obsolete (invalid), respectively.</span></span>

<span data-ttu-id="eb361-183">Il server DHCPv6 NetX Duo mantiene un timeout di sessione per ogni client per tenere traccia del tempo tra i messaggi del client.</span><span class="sxs-lookup"><span data-stu-id="eb361-183">The NetX Duo DHCPv6 Server maintains a session timeout for each Client to track the time between Client messages.</span></span> <span data-ttu-id="eb361-184">Questa operazione è necessaria in caso di perdita della connettività o della rete da parte di un host client.</span><span class="sxs-lookup"><span data-stu-id="eb361-184">This is necessary in the event of a Client host losing connectivity or the network doing down.</span></span> <span data-ttu-id="eb361-185">Una volta scaduto il timeout della sessione, si presuppone che il client non sia più interessato o in grado di effettuare richieste DHCPv6 del server.</span><span class="sxs-lookup"><span data-stu-id="eb361-185">When the session timeout expires, it is assumed the Client is either no longer interested or able to make DHCPv6 requests of the Server.</span></span> <span data-ttu-id="eb361-186">Il server Elimina il record client e restituisce qualsiasi indirizzo IPv6 assegnato provvisoriamente al pool disponibile.</span><span class="sxs-lookup"><span data-stu-id="eb361-186">The Server deletes the Client record and returns any tentatively assigned IPv6 address back to the available pool.</span></span> <span data-ttu-id="eb361-187">L'attesa del timeout della sessione è un'opzione configurabile dall'utente.</span><span class="sxs-lookup"><span data-stu-id="eb361-187">The session timeout wait is a user configurable option.</span></span>

<span data-ttu-id="eb361-188">Se il client desidera rilasciare l'indirizzo IPv6 o rileva che l'indirizzo IPv6 assegnato dal server DHCPv6 è già in uso, invierà rispettivamente un messaggio di *rilascio* o di *rifiuto* .</span><span class="sxs-lookup"><span data-stu-id="eb361-188">If the Client wishes to release its IPv6 address, or discovers that the IPv6 address assigned to it by the DHCPv6 Server is already in use, it send a *Release* or *Decline* message respectively.</span></span> <span data-ttu-id="eb361-189">Nel caso di un messaggio di *rilascio* , il server restituisce lo stato dell'indirizzo IPv6 al pool disponibile.</span><span class="sxs-lookup"><span data-stu-id="eb361-189">In the case of a *Release* message, the Server returns that IPv6 address status back to the available pool.</span></span> <span data-ttu-id="eb361-190">Nel caso del messaggio di *rifiuto* , viene aggiornata la tabella dei lease IP per indicare che l'indirizzo IPv6 non è disponibile (di proprietà di un'altra entità in altre parti della rete).</span><span class="sxs-lookup"><span data-stu-id="eb361-190">In the case of the *Decline* message, it updates its IP lease table to indicate this IPv6 address is not available (owned by another entity elsewhere on the network).</span></span>

<span data-ttu-id="eb361-191">**Dati di lease e record client IPv6**</span><span class="sxs-lookup"><span data-stu-id="eb361-191">**IPv6 Lease and Client Record Data**</span></span>

<span data-ttu-id="eb361-192">Quando il server DHCPv6 inizia ad accettare le richieste client, gestisce un elenco dei client attivi che richiedono o sono stati assegnati indirizzi IPv6.</span><span class="sxs-lookup"><span data-stu-id="eb361-192">When the DHCPv6 Server starts accepting Client requests it maintains a list of active Clients who are requesting or have been assigned IPv6 addresses.</span></span> <span data-ttu-id="eb361-193">Il server verifica la scadenza del lease IP per mezzo di un timer di lease che aggiorna periodicamente la durata del lease client.</span><span class="sxs-lookup"><span data-stu-id="eb361-193">The Server checks for IP lease expiration by means of a lease timer that periodically updates the Client lease duration.</span></span> <span data-ttu-id="eb361-194">Quando la durata supera la durata valida, il server cancella il record client e restituisce il relativo indirizzo IPv6 al pool disponibile.</span><span class="sxs-lookup"><span data-stu-id="eb361-194">When the duration exceeds the valid lifetime, the Server clears the Client record and returns its IPv6 address back to the available pool.</span></span> <span data-ttu-id="eb361-195">È il client ad avviare il processo di rinnovo/riassociazione prima che questo avvenga.</span><span class="sxs-lookup"><span data-stu-id="eb361-195">It is up to the Client to start the renewal/rebinding process before this happens!</span></span>

<span data-ttu-id="eb361-196">La tabella di record client del server DHCPv6 NetX Duo contiene informazioni per identificare i client e informazioni sullo stato per la convalida delle richieste del client DHCPv6 e l'assegnazione o la riassegnazione degli indirizzi IPv6.</span><span class="sxs-lookup"><span data-stu-id="eb361-196">The NetX Duo DHCPv6 Server client record table contains information to identify Clients, and ‘state’ information for validating DHCPv6 Client requests and assigning or re-assigning IPv6 addresses.</span></span> <span data-ttu-id="eb361-197">Tali informazioni includono:</span><span class="sxs-lookup"><span data-stu-id="eb361-197">Such information includes:</span></span>

- <span data-ttu-id="eb361-198">Identificatore univoco del client DHCPv6 (DUID) che definisce in modo univoco ogni host client in una rete.</span><span class="sxs-lookup"><span data-stu-id="eb361-198">The Client DHCPv6 Unique Identifier (DUID) which uniquely defines each Client host on a network.</span></span> <span data-ttu-id="eb361-199">Il client deve sempre usare lo stesso DUID per tutti i relativi messaggi DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="eb361-199">The Client must always use this same DUID for all its DHCPv6 messages.</span></span>

- <span data-ttu-id="eb361-200">Associazione di identità del client per gli indirizzi non temporanei (IANA) e indirizzo IPv6 dell'associazione di identità (IA) che definiscono i parametri di assegnazione di indirizzi IPv6 del client.</span><span class="sxs-lookup"><span data-stu-id="eb361-200">The Client Identity Association for Non Temporary Addresses (IANA) and Identity Association IPv6 address (IA) cumulatively which define the Client IPv6 address assignment parameters.</span></span>

- <span data-ttu-id="eb361-201">Richieste di opzioni client (server DNS, nome di dominio e così via).</span><span class="sxs-lookup"><span data-stu-id="eb361-201">Client option requests (DNS server, domain name, etc).</span></span>

- <span data-ttu-id="eb361-202">L'indirizzo di origine IPv6 del client (se impostato) e l'indirizzo di destinazione (se non multicast) della richiesta DHCPv6 più recente.</span><span class="sxs-lookup"><span data-stu-id="eb361-202">The Client IPv6 source address (if set) and destination address (if not multicast) of its most recent DHCPv6 request.</span></span>

- <span data-ttu-id="eb361-203">Il tipo di messaggio più recente del client e il "stato" di DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="eb361-203">The Client’s most recent message type and DHCPv6 ‘state’.</span></span>

## <a name="netx-duo-dhcpv6-server-requirements-and-constraints"></a><span data-ttu-id="eb361-204">Requisiti e vincoli del server DHCPv6 NetX Duo</span><span class="sxs-lookup"><span data-stu-id="eb361-204">NetX Duo DHCPv6 Server Requirements and Constraints</span></span>

<span data-ttu-id="eb361-205">Per l'API del server DHCPv6 NetX Duo è necessario ThreadX 5,1 o versione successiva e NetX Duo 5,5 o versione successiva.</span><span class="sxs-lookup"><span data-stu-id="eb361-205">The NetX Duo DHCPv6 Server API requires ThreadX 5.1 or later, and NetX Duo 5.5 or later.</span></span>

<span data-ttu-id="eb361-206">**Requisiti**</span><span class="sxs-lookup"><span data-stu-id="eb361-206">**Requirements**</span></span>

<span data-ttu-id="eb361-207">***Impostazione attività thread IP***</span><span class="sxs-lookup"><span data-stu-id="eb361-207">***IP Thread Task Setup***</span></span>

<span data-ttu-id="eb361-208">Il server DHCPv6 NetX Duo richiede la creazione di un'istanza IP per l'invio e la ricezione di messaggi su DHCPv6 sul collegamento di rete.</span><span class="sxs-lookup"><span data-stu-id="eb361-208">The NetX Duo DHCPv6 Server requires a creation of an IP instance for sending and receiving messages to DHCPv6 on its network link.</span></span> <span data-ttu-id="eb361-209">Questa operazione viene eseguita utilizzando il servizio *nx_ip_create* .</span><span class="sxs-lookup"><span data-stu-id="eb361-209">This is done using the *nx_ip_create* service.</span></span> <span data-ttu-id="eb361-210">È necessario creare il server NetX Duo DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="eb361-210">The NetX Duo DHCPv6 Server itself must be created.</span></span> <span data-ttu-id="eb361-211">Questa operazione viene eseguita utilizzando il servizio *nx_dhcpv6_server_create* .</span><span class="sxs-lookup"><span data-stu-id="eb361-211">This is done using the *nx_dhcpv6_server_create* service.</span></span>

<span data-ttu-id="eb361-212">DHCPv6 USA NetX Duo, ICMPv6 e UDP.</span><span class="sxs-lookup"><span data-stu-id="eb361-212">DHCPv6 utilizes NetX Duo, ICMPv6 and UDP.</span></span> <span data-ttu-id="eb361-213">Pertanto, è necessario abilitare IPv6 prima di usare il server DHCPv6 chiamando i servizi NetX Duo seguenti:</span><span class="sxs-lookup"><span data-stu-id="eb361-213">Therefore IPv6 must first be enabled prior to using DHCPv6 Server by calling the following NetX Duo services:</span></span>

- <span data-ttu-id="eb361-214">*nx_udp_enable*</span><span class="sxs-lookup"><span data-stu-id="eb361-214">*nx_udp_enable*</span></span>
- <span data-ttu-id="eb361-215">*nxd_ipv6_enable*</span><span class="sxs-lookup"><span data-stu-id="eb361-215">*nxd_ipv6_enable*</span></span>
- <span data-ttu-id="eb361-216">*nxd_icmp_enable*</span><span class="sxs-lookup"><span data-stu-id="eb361-216">*nxd_icmp_enable*</span></span>

<span data-ttu-id="eb361-217">Inoltre, prima che il server DHCPv6 possa essere avviato, è necessario eseguire alcune attività di configurazione:</span><span class="sxs-lookup"><span data-stu-id="eb361-217">Further, before the DHCPv6 Server can be started, it has a number of set up tasks to perform:</span></span>

- <span data-ttu-id="eb361-218">Creare e convalidare il collegamento degli indirizzi globali locali e IPv6.</span><span class="sxs-lookup"><span data-stu-id="eb361-218">Create and validate its link local and IPv6 global addresses.</span></span> <span data-ttu-id="eb361-219">La convalida degli indirizzi viene eseguita automaticamente da NetX Duo utilizzando il rilevamento degli indirizzi duplicati, se abilitato.</span><span class="sxs-lookup"><span data-stu-id="eb361-219">Address validation is performed automatically by NetX Duo using Duplicate Address Detection if it is enabled.</span></span> <span data-ttu-id="eb361-220">Per informazioni dettagliate sul collegamento della convalida degli indirizzi IP globali e locali, vedere il *manuale dell'utente di NETX Duo* .</span><span class="sxs-lookup"><span data-stu-id="eb361-220">See the *NetX Duo User Manual* for details on link local and global IP address validation.</span></span>

- <span data-ttu-id="eb361-221">Impostare l'indice dell'interfaccia di rete per l'interfaccia DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="eb361-221">Set the network interface index for its DHCPv6 interface.</span></span>

- <span data-ttu-id="eb361-222">Creare un intervallo di indirizzi IP per gli indirizzi IPv6 assegnabili.</span><span class="sxs-lookup"><span data-stu-id="eb361-222">Create an IP address range for assignable IPv6 addresses.</span></span> <span data-ttu-id="eb361-223">In alternativa, se i dati sono presenti in una sessione DHCPv6 del server precedente, i record della tabella e del client di lease IPv6 da tale sessione devono essere caricati dalla memoria non volatile al server DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="eb361-223">Or, if data exists from a previous Server DHCPv6 session, IPv6 lease table and client records from that session must be uploaded from non volatile memory to the DHCPv6 Server.</span></span> <span data-ttu-id="eb361-224">Nel piccolo sistema di esempio di questo documento vengono illustrati i servizi del server DHCPv6 per l'esecuzione di questo requisito.</span><span class="sxs-lookup"><span data-stu-id="eb361-224">The small example system elsewhere in this document will demonstrate the DHCPv6 Server services for accomplishing this requirement.</span></span>

- <span data-ttu-id="eb361-225">Impostare il server DUID.</span><span class="sxs-lookup"><span data-stu-id="eb361-225">Set the Server DUID.</span></span> <span data-ttu-id="eb361-226">Se il server ha creato DUID in una sessione precedente, deve usare gli stessi dati per creare lo stesso DUID per i messaggi ai client.</span><span class="sxs-lookup"><span data-stu-id="eb361-226">If the Server has created its DUID in a previous session it must use the same data to create the same DUID for messages to its Clients.</span></span> <span data-ttu-id="eb361-227">Il piccolo sistema di esempio in un altro punto di questo documento illustra il modo in cui viene eseguito questo requisito.</span><span class="sxs-lookup"><span data-stu-id="eb361-227">The small example system elsewhere in this document will demonstrate how this requirement is accomplished.</span></span>

<span data-ttu-id="eb361-228">A questo punto il server DHCPv6 è pronto per l'esecuzione.</span><span class="sxs-lookup"><span data-stu-id="eb361-228">At this point the DHCPv6 Server is ready to run.</span></span> <span data-ttu-id="eb361-229">Internamente, il server NetX Duo DHCPv6 creerà un socket UDP associato alla porta 547 e inizierà l'ascolto delle richieste client.</span><span class="sxs-lookup"><span data-stu-id="eb361-229">Internally the NetX Duo DHCPv6 Server will create a UDP socket bound to port 547, and starts listening for Client requests.</span></span>

<span data-ttu-id="eb361-230">***Requisiti del pool di pacchetti***</span><span class="sxs-lookup"><span data-stu-id="eb361-230">***Packet Pool Requirements***</span></span>

<span data-ttu-id="eb361-231">Il server NetX Duo DHCPv6 richiede un pool di pacchetti per l'invio di messaggi DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="eb361-231">NetX Duo DHCPv6 Server requires a packet pool for sending DHCPv6 messages.</span></span> <span data-ttu-id="eb361-232">Le dimensioni del pool di pacchetti in termini di payload del pacchetto e numero di pacchetti disponibili sono configurabili dall'utente e variano a seconda del volume previsto di messaggi DHCPv6 e di altre trasmissioni che verranno inviate dall'applicazione host.</span><span class="sxs-lookup"><span data-stu-id="eb361-232">The size of the packet pool in terms of packet payload and number of packets available is user configurable, and depends on the anticipated volume of DHCPv6 messages and other transmissions the host application will be sending.</span></span>

<span data-ttu-id="eb361-233">Un messaggio DHCPv6 tipico è di circa 200-300 byte a seconda del numero di opzioni aggiuntive richieste dal client e delle informazioni disponibili dal server.</span><span class="sxs-lookup"><span data-stu-id="eb361-233">A typical DHCPv6 message is about 200-300 bytes depending on the number of additional options requested by the Client, and information available from the Server.</span></span>

<span data-ttu-id="eb361-234">***Impostazione dell'interfaccia del server DHCPv6***</span><span class="sxs-lookup"><span data-stu-id="eb361-234">***Setting the DHCPv6 Server interface***</span></span>

<span data-ttu-id="eb361-235">Il server DHCPv6 utilizza per impostazione predefinita l'interfaccia di rete primaria come interfaccia su cui accetterà le richieste client.</span><span class="sxs-lookup"><span data-stu-id="eb361-235">The DHCPv6 Server defaults to the primary network interface as the interface it will accept Client requests on.</span></span> <span data-ttu-id="eb361-236">Tuttavia, l'applicazione host deve comunque impostare l'indice dell'indirizzo globale usato per creare l'indirizzo globale del server.</span><span class="sxs-lookup"><span data-stu-id="eb361-236">However, the host application must still set the global address index which it used to create the Server global address.</span></span> <span data-ttu-id="eb361-237">L'indice dell'interfaccia DHCPv6 e l'indice globale degli indirizzi vengono impostati utilizzando il servizio *nx_dhcpv6_server_interface_set* .</span><span class="sxs-lookup"><span data-stu-id="eb361-237">The DHCPv6 interface index and global address index are set using the *nx_dhcpv6_server_interface_set* service.</span></span> <span data-ttu-id="eb361-238">Questa operazione è illustrata anche nel "piccolo esempio" di questo documento.</span><span class="sxs-lookup"><span data-stu-id="eb361-238">This is also demonstrated in the “small example” in this document.</span></span>

<span data-ttu-id="eb361-239">***Salvataggio di DUID DHCPv6 tra i riavvii del server***</span><span class="sxs-lookup"><span data-stu-id="eb361-239">***Saving DHCPv6 DUID across Server Reboots***</span></span>

<span data-ttu-id="eb361-240">Il protocollo DHCPv6 richiede che il server usi lo stesso DUID tra più riavvii.</span><span class="sxs-lookup"><span data-stu-id="eb361-240">The DHCPv6 protocol requires the Server to use the same DUID across multiple reboots.</span></span> <span data-ttu-id="eb361-241">Tutti i dati utilizzati per creare il DUID devono pertanto essere archiviati e recuperati dalla memoria non volatile per questo requisito.</span><span class="sxs-lookup"><span data-stu-id="eb361-241">Any data used to create the DUID must therefore be stored and retrieved from nonvolatile memory for this requirement.</span></span> <span data-ttu-id="eb361-242">Per gli host che usano il collegamento layer Plus Time DUID che richiede l'accesso a un clock in tempo reale.</span><span class="sxs-lookup"><span data-stu-id="eb361-242">For hosts that use the Link Layer Plus Time DUID which requires access to a real time clock.</span></span> <span data-ttu-id="eb361-243">L'applicazione host DHCPv6 NetX Duo deve includere l'accesso ai dati in tempo reale per generare un valore di ora per la creazione iniziale del server DUID e archiviare tali dati per il riutilizzo nelle sessioni server successive.</span><span class="sxs-lookup"><span data-stu-id="eb361-243">The NetX Duo DHCPv6 host application should include real time data access for generating a time value for the initial Server DUID creation, and store that data for reuse on subsequent Server sessions.</span></span> <span data-ttu-id="eb361-244">Il *nx_dhcpv6_set_server_duid* accetta quindi i dati Duid come argomenti, nonché le opzioni di configurazione a seconda del tipo Duid, per produrre (o riprodurre) il proprio Duid.</span><span class="sxs-lookup"><span data-stu-id="eb361-244">The *nx_dhcpv6_set_server_duid* then takes DUID data as its arguments, as well as configuration options depending on DUID type, to produce (or reproduce) its own DUID.</span></span>

<span data-ttu-id="eb361-245">***Creazione elenco indirizzi IPv6 assegnabile***</span><span class="sxs-lookup"><span data-stu-id="eb361-245">***Assignable IPv6 Address List Creation***</span></span>

<span data-ttu-id="eb361-246">Dopo la creazione del server DHCPv6, l'applicazione host server deve creare un intervallo di indirizzi globali IPv6 assegnabili se non sono presenti dati dell'elenco di indirizzi IP archiviati in precedenza.</span><span class="sxs-lookup"><span data-stu-id="eb361-246">After creation of the DHCPv6 Server, the Server host application must create a range of assignable IPv6 global addresses if there is no previously stored IP address list data.</span></span> <span data-ttu-id="eb361-247">Questa operazione viene eseguita utilizzando il servizio *nx_dhcpv6_create_ip_address_range* che accetta come input un indirizzo IPv6 iniziale e finale.</span><span class="sxs-lookup"><span data-stu-id="eb361-247">This is done using the *nx_dhcpv6_create_ip_address_range* service which takes as input a starting and ending IPv6 address.</span></span>

<span data-ttu-id="eb361-248">***Salvataggio di dati del client e degli indirizzi assegnabili di DHCPv6***</span><span class="sxs-lookup"><span data-stu-id="eb361-248">***Saving DHCPv6 Assignable Address and Client data***</span></span>

<span data-ttu-id="eb361-249">Il protocollo DHCPv6 richiede che il server DHCPv6 salvi i dati degli indirizzi client e IPv6 in una risorsa di archiviazione non volatile in caso di riavvio del server.</span><span class="sxs-lookup"><span data-stu-id="eb361-249">The DHCPv6 protocol requires that the DHCPv6 Server save its Client and IPv6 address data in nonvolatile storage in the event of rebooting the server.</span></span> <span data-ttu-id="eb361-250">Il server DHCPv6 NetX Duo dispone di diverse API per il caricamento e il download dei dati degli indirizzi client e IPv6 da e verso il server DHCPv6, rispettivamente:</span><span class="sxs-lookup"><span data-stu-id="eb361-250">The NetX Duo DHCPv6 Server has several API for uploading and downloading Client and IPv6 address data to and from the DHCPv6 Server, respectively:</span></span>

<span data-ttu-id="eb361-251">*nx_dhcpv6_add_client_record*</span><span class="sxs-lookup"><span data-stu-id="eb361-251">*nx_dhcpv6_add_client_record*</span></span>

<span data-ttu-id="eb361-252">*nx_dhcpv6_add_ip_address_lease*</span><span class="sxs-lookup"><span data-stu-id="eb361-252">*nx_dhcpv6_add_ip_address_lease*</span></span>

<span data-ttu-id="eb361-253">*nx_dhcpv6_retrieve_client_record*</span><span class="sxs-lookup"><span data-stu-id="eb361-253">*nx_dhcpv6_retrieve_client_record*</span></span>

<span data-ttu-id="eb361-254">*nx_dhcpv6_retrieve_ip_address_lease*</span><span class="sxs-lookup"><span data-stu-id="eb361-254">*nx_dhcpv6_retrieve_ip_address_lease*</span></span>

<span data-ttu-id="eb361-255">Il caricamento dei dati nel server deve essere eseguito prima di riavviare il server.</span><span class="sxs-lookup"><span data-stu-id="eb361-255">Uploading data to the Server must be done before restarting the Server.</span></span> <span data-ttu-id="eb361-256">Il download dei dati deve essere eseguito solo dopo l'arresto o la sospensione del server DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="eb361-256">Downloading the data should be done only after the DHCPv6 Server is stopped (or suspended).</span></span> <span data-ttu-id="eb361-257">I servizi per questa operazione sono descritti in dettaglio più avanti in questo documento.</span><span class="sxs-lookup"><span data-stu-id="eb361-257">The services for doing so are described in detail later in this document.</span></span> <span data-ttu-id="eb361-258">Tuttavia, NetX Duo DHCPv6 fornisce non definisce l'accesso a un archivio non volatile.</span><span class="sxs-lookup"><span data-stu-id="eb361-258">However, the NetX Duo DHCPv6 provides does not define an access to nonvolatile storage.</span></span> <span data-ttu-id="eb361-259">Questa operazione deve essere gestita dall'applicazione host.</span><span class="sxs-lookup"><span data-stu-id="eb361-259">This must be handled by the host application.</span></span> <span data-ttu-id="eb361-260">Nel piccolo esempio viene illustrato il modo in cui l'applicazione host esegue questa operazione.</span><span class="sxs-lookup"><span data-stu-id="eb361-260">The small example demonstrates how the host application does this.</span></span>

<span data-ttu-id="eb361-261">***Identificatore univoco DHCP del server (DUID)***</span><span class="sxs-lookup"><span data-stu-id="eb361-261">***Server DHCP Unique Identifier (DUID)***</span></span>

<span data-ttu-id="eb361-262">Il server DUID definisce in modo univoco l'host del server DHCPv6 sulla rete.</span><span class="sxs-lookup"><span data-stu-id="eb361-262">The Server DUID uniquely defines the DHCPv6 Server host on the network.</span></span> <span data-ttu-id="eb361-263">Se un server non ha creato in precedenza il relativo DUID, può usare il *nx_dhcpv6_server_set_duid* per crearne uno.</span><span class="sxs-lookup"><span data-stu-id="eb361-263">If a Server has not previously created its DUID, it can use the *nx_dhcpv6_server_set_duid* to create one.</span></span> <span data-ttu-id="eb361-264">In base allo standard RFC 3315, il server DHCPv6 deve salvare questo DUID nella memoria non volatile per poterlo recuperare dopo il riavvio del server.</span><span class="sxs-lookup"><span data-stu-id="eb361-264">As per RFC 3315, the DHCPv6 Server must save this DUID to nonvolatile memory to be able to retrieve it after Server reboots.</span></span> <span data-ttu-id="eb361-265">Il server DHCPv6 supporta i tipi DUID a livello di collegamento, ora del livello di collegamento e Enterprise (fornitore assegnato).</span><span class="sxs-lookup"><span data-stu-id="eb361-265">The DHCPv6 Server supports the Link Layer, Link Layer Time and Enterprise (Vendor assigned) DUID types.</span></span> <span data-ttu-id="eb361-266">Si noti che il client deve inviare direttamente il tipo di fornitore DUID.</span><span class="sxs-lookup"><span data-stu-id="eb361-266">Note that the Client must send in the Vendor type DUID directly.</span></span> <span data-ttu-id="eb361-267">L'opzione per il tipo di fornitore DUID (17) non è supportata direttamente dal server NetX Duo DHPv6.</span><span class="sxs-lookup"><span data-stu-id="eb361-267">The option for Vendor type DUIDs (17) is not directly supported by the NetX Duo DHPv6 Server.</span></span>

<span data-ttu-id="eb361-268">L'applicazione host del server DHCPv6 dispone di valori predefiniti per l'assegnazione di indirizzi IPv6, incluso il timeout del lease.</span><span class="sxs-lookup"><span data-stu-id="eb361-268">The DHCPv6 Server host application has default values for IPv6 address assignment including lease timeout.</span></span> <span data-ttu-id="eb361-269">Per informazioni su come impostare queste opzioni, vedere opzioni configurabili più avanti in questo documento.</span><span class="sxs-lookup"><span data-stu-id="eb361-269">See Configurable Options later in this document for how to set these options.</span></span> <span data-ttu-id="eb361-270">:</span><span class="sxs-lookup"><span data-stu-id="eb361-270">:</span></span>

<span data-ttu-id="eb361-271">Il blocco di controllo *IANA* contiene i campi T1 e T2.</span><span class="sxs-lookup"><span data-stu-id="eb361-271">The *IANA* control block contains the T1 and T2 fields.</span></span> <span data-ttu-id="eb361-272">Il blocco *Ia* nel blocco di controllo *IANA* contiene i campi di durata preferiti e validi.</span><span class="sxs-lookup"><span data-stu-id="eb361-272">The *IA* block in the *IANA* control block contains the preferred and valid lifetime fields.</span></span> <span data-ttu-id="eb361-273">Per l'impostazione di queste opzioni, l'applicazione host dispone di opzioni configurabili definite altrove in questo documento.</span><span class="sxs-lookup"><span data-stu-id="eb361-273">The host application has configurable options defined elsewhere in this document for setting these options.</span></span> <span data-ttu-id="eb361-274">Sono assegnati a tutte le richieste di indirizzi IPv6 del client.</span><span class="sxs-lookup"><span data-stu-id="eb361-274">They are assigned to all Client IPv6 address requests.</span></span>

<span data-ttu-id="eb361-275">Questi parametri di lease IP DHCPv6 sono definiti di seguito.</span><span class="sxs-lookup"><span data-stu-id="eb361-275">These DHCPv6 IP lease parameters are defined below.</span></span>

<span data-ttu-id="eb361-276">T1: tempo in secondi durante il quale il client deve iniziare a rinnovare l'indirizzo IPv6 dal server che lo ha assegnato.</span><span class="sxs-lookup"><span data-stu-id="eb361-276">T1 – time in seconds when the Client must start renewing its IPv6 address from the Server that assigned it.</span></span>

<span data-ttu-id="eb361-277">T2: tempo in secondi durante il quale il client deve iniziare a riassociare l'indirizzo IPv6, se il rinnovo non è riuscito, con qualsiasi server nel relativo collegamento.</span><span class="sxs-lookup"><span data-stu-id="eb361-277">T2 – time in seconds when the Client must start rebinding the IPv6 address, if renewal failed, with any Server on its link.</span></span>

<span data-ttu-id="eb361-278">Durata preferita: tempo in secondi durante il quale l'indirizzo client diventa deprecato se il client non ha rinnovato o riassociato.</span><span class="sxs-lookup"><span data-stu-id="eb361-278">Preferred lifetime – time in seconds when the Client address becomes deprecated if the Client has not renewed or rebound it.</span></span> <span data-ttu-id="eb361-279">Il client può comunque utilizzare questo indirizzo.</span><span class="sxs-lookup"><span data-stu-id="eb361-279">The Client can still use this address.</span></span>

<span data-ttu-id="eb361-280">Durata valida: tempo in secondi durante il quale l'indirizzo IP del client è scaduto e non deve usare questo indirizzo nelle trasmissioni di rete.</span><span class="sxs-lookup"><span data-stu-id="eb361-280">Valid lifetime – time in seconds when the Client IP address is expired and MUST not use this address in its network transmissions.</span></span>

<span data-ttu-id="eb361-281">La specifica RFC consiglia rispettivamente gli orari T1 e T2, ovvero 0,5 e 0,8, della durata preferita nell'opzione client *IANA* .</span><span class="sxs-lookup"><span data-stu-id="eb361-281">The RFC recommends T1 and T2 times that are 0.5 and 0.8, respectively, of the preferred lifetime in the Client *IANA* option.</span></span> <span data-ttu-id="eb361-282">Se il server non ha alcuna preferenza, impostare queste ore su zero.</span><span class="sxs-lookup"><span data-stu-id="eb361-282">If the Server has no preference, it should set these times to zero.</span></span> <span data-ttu-id="eb361-283">Se una risposta del server contiene le ore T1 e T2 impostate su zero, consente al client di impostare i relativi orari T1 e T2.</span><span class="sxs-lookup"><span data-stu-id="eb361-283">If a Server reply contains T1 and T2 times set to zero, it is letting the Client set its own T1 and T2 times.</span></span>

<span data-ttu-id="eb361-284">**Vincoli**</span><span class="sxs-lookup"><span data-stu-id="eb361-284">**Constraints**</span></span>

<span data-ttu-id="eb361-285">Il server DHCPv6 NetX Duo non supporta le opzioni DHCPv6 seguenti:</span><span class="sxs-lookup"><span data-stu-id="eb361-285">NetX Duo DHCPv6 Server does not support the following DHCPv6 options:</span></span>

  - <span data-ttu-id="eb361-286">Opzione di commit rapido che consente di ottimizzare il processo di richiesta di indirizzi DHCPv6 solo allo scambio di messaggi di sollecitazione e risposta</span><span class="sxs-lookup"><span data-stu-id="eb361-286">Rapid Commit option which optimizes the DHCPv6 address request process to just the Solicit and Reply message exchange</span></span>

  - <span data-ttu-id="eb361-287">Riconfigura l'opzione che consente al server di avviare le modifiche allo stato dell'indirizzo IP del client.</span><span class="sxs-lookup"><span data-stu-id="eb361-287">Reconfigure option which allows the Server can initiate changes to the Client’s IP address status.</span></span>

  - <span data-ttu-id="eb361-288">Opzione unicast; tutti i messaggi client devono essere inviati direttamente al *All_DHCP_Relay_Agents_and_Servers* indirizzo multicast anziché al server DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="eb361-288">Unicast option; all Client messages must be sent to the *All_DHCP_Relay_Agents_and_Servers* multicast address rather than to the DHCPv6 Server directly.</span></span>

  - <span data-ttu-id="eb361-289">Associazione di identità per l'opzione degli indirizzi temporanei (IA_TA) che è un indirizzo IP temporaneo concesso a un client.</span><span class="sxs-lookup"><span data-stu-id="eb361-289">Identity Association for the Temporary Addresses(IA_TA)option which is a temporary IP address granted to a Client.</span></span>

  - <span data-ttu-id="eb361-290">Più opzioni IA (indirizzi IPv6) per ogni richiesta client</span><span class="sxs-lookup"><span data-stu-id="eb361-290">Multiple IA (IPv6 addresses) options per Client Request</span></span>

  - <span data-ttu-id="eb361-291">L'host di inoltro tra il client e il server DHCPv6, ad esempio client e server, deve trovarsi nella stessa rete.</span><span class="sxs-lookup"><span data-stu-id="eb361-291">Relay host between DHCPv6 Client and Server e.g. Client and Server must be on the same network.</span></span>

  - <span data-ttu-id="eb361-292">IPSec e l'autenticazione non sono supportati nella messaggistica DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="eb361-292">IPSec and Authentication are not supported in DHCPv6 messaging.</span></span> <span data-ttu-id="eb361-293">Tuttavia, l'istanza IP può essere abilitata per IPSec a seconda della versione di NetX Duo in uso.</span><span class="sxs-lookup"><span data-stu-id="eb361-293">However, the IP instance may be IPSec enabled depending on the version of NetX Duo in use.</span></span>

  - <span data-ttu-id="eb361-294">Il server DHCPv6 NetX Duo supporta direttamente solo la richiesta di opzione del server DNS.</span><span class="sxs-lookup"><span data-stu-id="eb361-294">The NetX Duo DHCPv6 Server directly supports only the DNS server option request.</span></span> <span data-ttu-id="eb361-295">Questo può cambiare nelle versioni future.</span><span class="sxs-lookup"><span data-stu-id="eb361-295">This may change in future releases.</span></span>

  - <span data-ttu-id="eb361-296">L'opzione di delega del prefisso non è supportata.</span><span class="sxs-lookup"><span data-stu-id="eb361-296">The Prefix Delegation option is not supported.</span></span>

  - <span data-ttu-id="eb361-297">Autenticazione dei messaggi DHCPv6 sebbene sia possibile abilitare IPSec nell'ambiente NetX Duo sottostante.</span><span class="sxs-lookup"><span data-stu-id="eb361-297">Authentication of DHCPv6 messages although IPSec can be enabled in the underlying NetX Duo environment.</span></span> <span data-ttu-id="eb361-298">Il server DHCPv6 NetX Duo non supporta le connessioni di inoltro ai client.</span><span class="sxs-lookup"><span data-stu-id="eb361-298">Neither does the NetX Duo DHCPv6 Server support relay connections to the Clients.</span></span> <span data-ttu-id="eb361-299">Si presuppone che tutte le richieste client abbiano origine dagli host nella rete del server.</span><span class="sxs-lookup"><span data-stu-id="eb361-299">It is assumed all Client requests originate from hosts on the Server network.</span></span>

## <a name="netx-duo-dhcpv6-server-callback-functions"></a><span data-ttu-id="eb361-300">Funzioni di callback del server DHCPv6 NetX Duo</span><span class="sxs-lookup"><span data-stu-id="eb361-300">NetX Duo DHCPv6 Server Callback Functions</span></span>

<span data-ttu-id="eb361-301">*nx_dhcpv6_IP_address_declined_handler*</span><span class="sxs-lookup"><span data-stu-id="eb361-301">*nx_dhcpv6_IP_address_declined_handler*</span></span>

<span data-ttu-id="eb361-302">Quando il client DHCPv6 invia un messaggio di rifiuto, il server DHCPv6 NetX Duo contrassegna l'indirizzo come non disponibile nelle tabelle degli indirizzi IPv6.</span><span class="sxs-lookup"><span data-stu-id="eb361-302">When the DHCPv6 Client sends a Decline message, the NetX Duo DHCPv6 Server marks the address as not available in its IPv6 address tables.</span></span> <span data-ttu-id="eb361-303">Per avere la possibilità di personalizzare la gestione del server di questo messaggio, viene fornita la *nx_dhcpv6_IP_address_declined_handler* *.*</span><span class="sxs-lookup"><span data-stu-id="eb361-303">To have the ability to customize the Server handling of this message, the *nx_dhcpv6_IP_address_declined_handler* is provided *.*</span></span> <span data-ttu-id="eb361-304">Questo callback, tuttavia, non è attualmente implementato.</span><span class="sxs-lookup"><span data-stu-id="eb361-304">However, this callback is not currently implemented.</span></span>

<span data-ttu-id="eb361-305">*nx_dhcpv6_server_option_request_handler*</span><span class="sxs-lookup"><span data-stu-id="eb361-305">*nx_dhcpv6_server_option_request_handler*</span></span>

<span data-ttu-id="eb361-306">Quando il messaggio del client DHCPv6 contiene i dati di richiesta di opzione, il server DHCPv6 NetX Duo invia ogni codice dell'opzione di richiesta di opzione a questo callback utente, se definito.</span><span class="sxs-lookup"><span data-stu-id="eb361-306">When the DHCPv6 Client message contains option request data, the NetX Duo DHCPv6 Server forwards each option request option code to this user callback, if defined.</span></span> <span data-ttu-id="eb361-307">In questo modo, il server NetX Duo è in grado di consentire al callback definito dall'utente di compilare i dati.</span><span class="sxs-lookup"><span data-stu-id="eb361-307">This gives the NetX Duo Server the capability to let the user defined callback fill in the data.</span></span> <span data-ttu-id="eb361-308">Questa funzionalità, tuttavia, non è attualmente implementata.</span><span class="sxs-lookup"><span data-stu-id="eb361-308">However this functionality is not currently implemented.</span></span>

## <a name="supported-dhcpv6-rfcs"></a><span data-ttu-id="eb361-309">RFC DHCPv6 supportate</span><span class="sxs-lookup"><span data-stu-id="eb361-309">Supported DHCPv6 RFCs</span></span>

<span data-ttu-id="eb361-310">NetX Duo DHCPv6 è compatibile con RFC3315, RFC3646 e RFC correlati.</span><span class="sxs-lookup"><span data-stu-id="eb361-310">NetX Duo DHCPv6 is compliant with RFC3315, RFC3646, and related RFCs.</span></span>