---
title: Appendice F-GUIX RTO binding Services
description: Informazioni sui servizi di binding RTO di GUIX.
author: philmea
ms.author: philmea
ms.date: 05/19/2020
ms.topic: article
ms.service: rtos
ms.openlocfilehash: 1d94dbb9d7d53ec3e1900188142974cc981dfea9
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/22/2021
ms.locfileid: "104823174"
---
# <a name="appendix-f---guix-rtos-binding-services"></a><span data-ttu-id="28151-103">Appendice F-GUIX RTO binding Services</span><span class="sxs-lookup"><span data-stu-id="28151-103">Appendix F - GUIX RTOS Binding Services</span></span>

<span data-ttu-id="28151-104">GUIX richiede servizi thread o attività, mutex, coda di eventi e servizi di temporizzazione che forniscono il RTO sottostante.</span><span class="sxs-lookup"><span data-stu-id="28151-104">GUIX requires thread or tasking services, mutex, event queue, and timing services providing by the underlying RTOS.</span></span> <span data-ttu-id="28151-105">Per impostazione predefinita, GUIX è configurato per usare il sistema operativo ThreadX in tempo reale per fornire questi servizi.</span><span class="sxs-lookup"><span data-stu-id="28151-105">By default GUIX is configured to utilize the ThreadX real time operating system to provide these services.</span></span> <span data-ttu-id="28151-106">Per trasferire GUIX a un altro sistema operativo, lo sviluppatore deve # definire la direttiva del pre-processore GX_DISABLE_THREADX_BINDING e ricompilare la libreria GUIX per rimuovere le dipendenze ThreadX.</span><span class="sxs-lookup"><span data-stu-id="28151-106">To port GUIX to another operating system, the developer should # define the pre-processor directive GX_DISABLE_THREADX_BINDING and rebuild the GUIX library to remove the ThreadX dependencies.</span></span> <span data-ttu-id="28151-107">Inoltre, lo sviluppatore dovrà fornire le seguenti definizioni di macro e funzioni di supporto.</span><span class="sxs-lookup"><span data-stu-id="28151-107">In addition, the developer will need to provide the following macro definitions and supporting functions.</span></span> <span data-ttu-id="28151-108">Esempi di queste definizioni di macro e funzioni di supporto sono disponibili nei file gx_system_rtos_bind. h e gx_system_rtos_bind. c, che forniscono un esempio di integrazione RTO generica.</span><span class="sxs-lookup"><span data-stu-id="28151-108">Examples of these macro definitions and supporting functions can be found in the files gx_system_rtos_bind.h and gx_system_rtos_bind.c, which provide an example generic rtos integration.</span></span>

<span data-ttu-id="28151-109">Macro di integrazione di sistema:</span><span class="sxs-lookup"><span data-stu-id="28151-109">System Integration macros:</span></span>

<span data-ttu-id="28151-110">**GX_RTOS_BINDING_INITIALIZE**</span><span class="sxs-lookup"><span data-stu-id="28151-110">**GX_RTOS_BINDING_INITIALIZE**</span></span>

<span data-ttu-id="28151-111">Questa macro viene richiamata durante l'inizializzazione del sistema.</span><span class="sxs-lookup"><span data-stu-id="28151-111">This macro is invoked during system initialization.</span></span> <span data-ttu-id="28151-112">È necessario definire la macro per chiamare qualsiasi funzione necessaria per preparare i servizi di sistema RTO o le risorse RTO prima di usare.</span><span class="sxs-lookup"><span data-stu-id="28151-112">The macro should be defined to call any function needed to prepare your rtos system services or rtos resources prior to use.</span></span> <span data-ttu-id="28151-113">Si tratta dell'opportunità di associazione per preparare le risorse RTO che GUIX utilizzerà.</span><span class="sxs-lookup"><span data-stu-id="28151-113">This is the binding’s opportunity to prepare the rtos resources that GUIX will use.</span></span>

<span data-ttu-id="28151-114">**GX_SYSTEM_THREAD_START**</span><span class="sxs-lookup"><span data-stu-id="28151-114">**GX_SYSTEM_THREAD_START**</span></span>

<span data-ttu-id="28151-115">Questa macro viene richiamata quando l'attività o il thread di GUIX deve iniziare l'esecuzione.</span><span class="sxs-lookup"><span data-stu-id="28151-115">This macro is invoked when the GUIX task or thread should start executing.</span></span> <span data-ttu-id="28151-116">Questa macro deve essere definita per chiamare una funzione che avvierà il thread GUIX in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="28151-116">This macro should be defined to call a function which will start the GUIX thread running.</span></span> <span data-ttu-id="28151-117">Il punto di ingresso al thread GUIX viene passato alla funzione chiamata.</span><span class="sxs-lookup"><span data-stu-id="28151-117">The entry point to the GUIX thread is passed to the called function.</span></span> <span data-ttu-id="28151-118">La firma della funzione chiamata deve essere</span><span class="sxs-lookup"><span data-stu-id="28151-118">The signature of the called function must be</span></span>

<span data-ttu-id="28151-119">**UINT *function_name*(void (thread_entry_point) (void));**</span><span class="sxs-lookup"><span data-stu-id="28151-119">**UINT *function_name*(VOID (thread_entry_point)(VOID));**</span></span>

<span data-ttu-id="28151-120">Questa funzione deve restituire GX_SUCCESS se il thread è stato avviato correttamente oppure GX_FAILURE.</span><span class="sxs-lookup"><span data-stu-id="28151-120">This function should return GX_SUCCESS if the thread is successfully started, or GX_FAILURE.</span></span>

<span data-ttu-id="28151-121">**GX_EVENT_PUSH**</span><span class="sxs-lookup"><span data-stu-id="28151-121">**GX_EVENT_PUSH**</span></span>

<span data-ttu-id="28151-122">Questa macro viene richiamata per eseguire il push di un evento nella coda degli eventi FIFO utilizzata da GUIX.</span><span class="sxs-lookup"><span data-stu-id="28151-122">This macro is invoked to push an event into the FIFO event queue used by GUIX.</span></span> <span data-ttu-id="28151-123">Quando si esegue il porting a un nuovo RTO, è responsabilità dell'utente implementare questa coda di eventi in modo thread-safe.</span><span class="sxs-lookup"><span data-stu-id="28151-123">When porting to a new rtos, it is your responsibility to implement this event queue in a thread-safe manner.</span></span> <span data-ttu-id="28151-124">GX_EVENT le strutture devono essere copiate in questa coda e copiate fuori dalla coda, ad esempio una coda di GX_EVENT puntatori non funzionerà, poiché gli eventi GUIX possono essere variabili automatiche dalla visualizzazione del producer di eventi.</span><span class="sxs-lookup"><span data-stu-id="28151-124">GX_EVENT structures must be copied into this queue and copied out of this queue, i.e. a queue of GX_EVENT pointers will not work, since GUIX events can be automatic variables from the view of the event producer.</span></span> <span data-ttu-id="28151-125">La firma della funzione chiamata da questa macro deve essere:</span><span class="sxs-lookup"><span data-stu-id="28151-125">The signature of the function called by this macro must be:</span></span>

<span data-ttu-id="28151-126">\**UINT *function_name* (GX_EVENT *event_ptr);**</span><span class="sxs-lookup"><span data-stu-id="28151-126">\**UINT *function_name* (GX_EVENT *event_ptr);**</span></span>

<span data-ttu-id="28151-127">Questa funzione deve restituire GX_SUCCESS se l'evento viene inserito nella coda degli eventi, in caso contrario deve restituire GX_FAILURE.</span><span class="sxs-lookup"><span data-stu-id="28151-127">This function should return GX_SUCCESS if the event is pushed into the event queue, otherwise it should return GX_FAILURE.</span></span>

<span data-ttu-id="28151-128">**GX_EVENT_POP**</span><span class="sxs-lookup"><span data-stu-id="28151-128">**GX_EVENT_POP**</span></span>

<span data-ttu-id="28151-129">Questa macro viene richiamata per rimuovere l'evento Head (meno recente) dalla coda degli eventi GUIX e copiarlo nel percorso richiesto.</span><span class="sxs-lookup"><span data-stu-id="28151-129">This macro is invoked to remove the head (oldest) event from the GUIX event queue and copy it into the requested location.</span></span> <span data-ttu-id="28151-130">Questa funzione deve essere in grado di bloccare o attendere un evento se non sono presenti eventi nella coda degli eventi.</span><span class="sxs-lookup"><span data-stu-id="28151-130">This function must be able to optionally block or wait for an event if no events are currently in the event queue.</span></span> <span data-ttu-id="28151-131">La firma della funzione richiamata da questa macro deve essere</span><span class="sxs-lookup"><span data-stu-id="28151-131">The signature of the function invoked by this macro must be</span></span>

<span data-ttu-id="28151-132">UINT function_name (GX_EVENT \* put_event, GX_BOOL Wait)</span><span class="sxs-lookup"><span data-stu-id="28151-132">UINT function_name(GX_EVENT \*put_event, GX_BOOL wait)</span></span>

<span data-ttu-id="28151-133">Se il parametro Wait = = GX_TRUE, la funzione non deve essere restituita fino a quando non viene fornito un evento.</span><span class="sxs-lookup"><span data-stu-id="28151-133">If the wait parameter == GX_TRUE, the function should not return until an event is provided.</span></span> <span data-ttu-id="28151-134">Se il parametro Wait è GX_FALSE, la funzione deve restituire immediatamente con o senza un evento.</span><span class="sxs-lookup"><span data-stu-id="28151-134">If the wait parameter is GX_FALSE, the function should return immediately with or without an event.</span></span>

<span data-ttu-id="28151-135">Se un evento viene recuperato dalla coda, deve essere copiato nel percorso put_event e lo stato restituito è GX_SUCCESS.</span><span class="sxs-lookup"><span data-stu-id="28151-135">If an event is retrieved from the queue, it should copied into the put_event location and the return status is GX_SUCCESS.</span></span> <span data-ttu-id="28151-136">In caso contrario, lo stato restituito deve essere GX_FAILURE.</span><span class="sxs-lookup"><span data-stu-id="28151-136">Otherwise the return status should be GX_FAILURE.</span></span>

<span data-ttu-id="28151-137">**GX_EVENT_FOLD**</span><span class="sxs-lookup"><span data-stu-id="28151-137">**GX_EVENT_FOLD**</span></span>

<span data-ttu-id="28151-138">Questa macro viene richiamata da GUIX per ridurre un evento nella coda degli eventi FIFO.</span><span class="sxs-lookup"><span data-stu-id="28151-138">This macro is invoked by GUIX to fold an event into the FIFO event queue.</span></span> <span data-ttu-id="28151-139">La riduzione di un evento significa che se un evento dello stesso tipo esiste già nella coda, tale voce è Update per contenere il payload del nuovo evento.</span><span class="sxs-lookup"><span data-stu-id="28151-139">Folding an event means that if an event of the same type already exists in the queue, that entry is update to contain the payload of the new event.</span></span> <span data-ttu-id="28151-140">Se un evento esistente dello stesso tipo non viene trovato nella coda, viene eseguito il push di un nuovo evento nella coda.</span><span class="sxs-lookup"><span data-stu-id="28151-140">If an existing event of the same type is not found in the queue, a new event is pushed into the queue.</span></span> 

<span data-ttu-id="28151-141">Per le associazioni che non possono implementare la funzionalità di riduzioni degli eventi, è accettabile richiamare semplicemente il GX_EVENT_PUSH.</span><span class="sxs-lookup"><span data-stu-id="28151-141">For bindings that cannot implement the event fold feature, it is acceptable to simply invoke the GX_EVENT_PUSH.</span></span>

<span data-ttu-id="28151-142">**GX_TIMER_START**</span><span class="sxs-lookup"><span data-stu-id="28151-142">**GX_TIMER_START**</span></span>

<span data-ttu-id="28151-143">Questa macro viene richiamata quando GUIX deve ricevere un input timer periodico.</span><span class="sxs-lookup"><span data-stu-id="28151-143">This macro is invoked when GUIX needs to receive periodic timer input.</span></span> <span data-ttu-id="28151-144">Questa macro dovrebbe richiamare un servizio che avvia il servizio timer periodico di RTO di basso livello.</span><span class="sxs-lookup"><span data-stu-id="28151-144">This macro should invoke a service that starts the low-level RTOS periodic timer service.</span></span> <span data-ttu-id="28151-145">Se non è possibile arrestare e avviare facilmente il servizio timer RTO, è accettabile, ma meno efficiente, lasciare il servizio in esecuzione in qualsiasi momento.</span><span class="sxs-lookup"><span data-stu-id="28151-145">If the RTOS timer service cannot be easily stopped and started, it is acceptable but less efficient to leave this service running at all times.</span></span>

<span data-ttu-id="28151-146">Quando il servizio timer RTO di basso livello scade periodicamente, è necessario che l'associazione chiami la funzione di sistema GUIX _gx_system_timer_expiration (0); La chiamata periodica di questa funzione è l'elemento che guida i servizi timer del timer GUIX di alto livello.</span><span class="sxs-lookup"><span data-stu-id="28151-146">When the low-level RTOS timer service periodically expires, the binding must call the GUIX system function _gx_system_timer_expiration(0); Calling this function periodically is what drives the high-level GUIX timer widget timer services.</span></span>

<span data-ttu-id="28151-147">**GX_TIMER_STOP**</span><span class="sxs-lookup"><span data-stu-id="28151-147">**GX_TIMER_STOP**</span></span>

<span data-ttu-id="28151-148">Questa macro viene richiamata quando GUIX non necessita più di un timer periodico (ovvero non è in esecuzione alcun timer GUIX attivo).</span><span class="sxs-lookup"><span data-stu-id="28151-148">This macro is invoked when GUIX no longer needs a periodic timer (i.e. there are no active GUIX timers running).</span></span> <span data-ttu-id="28151-149">Se non è possibile arrestare e avviare facilmente il servizio timer RTO, è accettabile, ma meno efficiente, lasciare l'esecuzione di questo servizio in qualsiasi momento e definire questa macro per non eseguire alcuna operazione.</span><span class="sxs-lookup"><span data-stu-id="28151-149">If the RTOS timer service cannot be easily stopped and started, it is acceptable but less efficient to leave this service running at all times and define this macro to do nothing.</span></span>

<span data-ttu-id="28151-150">**GX_SYSTEM_MUTEX_LOCK**</span><span class="sxs-lookup"><span data-stu-id="28151-150">**GX_SYSTEM_MUTEX_LOCK**</span></span>

<span data-ttu-id="28151-151">Questa macro viene richiamata da GUIX durante le sezioni di codice critiche per impedire l'esecuzione di un'altra attività da svuotamento e la modifica di strutture di dati comuni, causando potenzialmente il danneggiamento.</span><span class="sxs-lookup"><span data-stu-id="28151-151">This macro is invoked by GUIX during critical code sections to prevent another task from  pre-empting and modifying common data structures, potentially causing corruption.</span></span> <span data-ttu-id="28151-152">Questa macro deve chiamare una funzione che implementa il servizio di blocco di risorse RTO appropriato.</span><span class="sxs-lookup"><span data-stu-id="28151-152">This macro should call a function that implements the suitable RTOS resource locking service.</span></span>

<span data-ttu-id="28151-153">Se non si usano mai servizi API GUIX all'esterno del thread GUIX, è possibile definire questa macro per non eseguire alcuna operazione.</span><span class="sxs-lookup"><span data-stu-id="28151-153">If you never utilize any GUIX API services outside of the GUIX thread, you can define this macro to do nothing.</span></span>

<span data-ttu-id="28151-154">**GX_SYSTEM_MUTEX_UNLOCK**</span><span class="sxs-lookup"><span data-stu-id="28151-154">**GX_SYSTEM_MUTEX_UNLOCK**</span></span>

<span data-ttu-id="28151-155">Questa macro viene richiamata alla fine delle sezioni di codice critiche e dovrebbe sbloccare la risorsa GUIX usando il servizio RTO sottostante appropriato.</span><span class="sxs-lookup"><span data-stu-id="28151-155">This macro is invoked at the end of critical code sections, and should unlock the GUIX resource using the suitable underlying RTOS service.</span></span> <span data-ttu-id="28151-156">Se non si usano mai servizi API GUIX all'esterno del thread GUIX, è possibile definire questa macro per non eseguire alcuna operazione.</span><span class="sxs-lookup"><span data-stu-id="28151-156">If you never utilize any GUIX API services outside of the GUIX thread, you can define this macro to do nothing.</span></span>

<span data-ttu-id="28151-157">**GX_SYSTEM_TIME_GET**</span><span class="sxs-lookup"><span data-stu-id="28151-157">**GX_SYSTEM_TIME_GET**</span></span>

<span data-ttu-id="28151-158">Questa macro deve chiamare una funzione che restituisce l'ora di sistema corrente è "i cicli di sistema", che è in genere il numero di interrupt del timer di basso livello che si sono verificati dall'avvio del sistema.</span><span class="sxs-lookup"><span data-stu-id="28151-158">This macro should call a function that returns the current system time is “system ticks”, which is usually the number of low-level timer interrupts that have occurred since system startup.</span></span> <span data-ttu-id="28151-159">Questo servizio viene usato per calcolare la velocità di penna dell'evento Touch per i movimenti di input di tocco.</span><span class="sxs-lookup"><span data-stu-id="28151-159">This service is used to calculate touch event pen speed for touch input gestures.</span></span> <span data-ttu-id="28151-160">La firma della funzione richiamata da questa macro deve essere:</span><span class="sxs-lookup"><span data-stu-id="28151-160">The signature of the function invoked by this macro must be:</span></span>

<span data-ttu-id="28151-161">***Function_name* ulong (void);**</span><span class="sxs-lookup"><span data-stu-id="28151-161">**ULONG *function_name*(VOID);**</span></span>

<span data-ttu-id="28151-162">**GX_CURRENT_THREAD**</span><span class="sxs-lookup"><span data-stu-id="28151-162">**GX_CURRENT_THREAD**</span></span>

<span data-ttu-id="28151-163">Questa macro viene richiamata per identificare il thread attualmente in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="28151-163">This macro is invoked to identify the currently executing thread.</span></span> <span data-ttu-id="28151-164">Il servizio chiamato da questa macro deve restituire un valore void \*, vale a dire che il tipo di dati utilizzato dal sistema operativo per identificare il thread di esecuzione corrente deve essere eseguito il cast a void \* per essere restituito a GUX.</span><span class="sxs-lookup"><span data-stu-id="28151-164">The service called by this macro must return a void \*, meaning that the data type used by your operating system to identify the current execution thread must be cast to a void \* to be returned to GUX.</span></span>

<span data-ttu-id="28151-165">Un esempio completo di associazione RTO generica viene implementato nel file gx_system_rtos_bind. h e gx_system_rtos_bind. c.</span><span class="sxs-lookup"><span data-stu-id="28151-165">A complete example of a generic RTOS binding is implemented in the filed gx_system_rtos_bind.h and gx_system_rtos_bind.c</span></span>