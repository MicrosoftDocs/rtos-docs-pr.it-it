---
title: Capitolo 1-Introduzione ad Azure RTO NetX AutoIP
description: Il protocollo AutoIP NetX di Azure RTO è un protocollo progettato per la configurazione dinamica degli indirizzi IPv4 in una rete locale.
author: philmea
ms.author: philmea
ms.date: 06/04/2020
ms.topic: article
ms.service: rtos
ms.openlocfilehash: c26b4112814bb586e056246d68c2597d56df6085
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/22/2021
ms.locfileid: "104822754"
---
# <a name="chapter-1---introduction-to-azure-rtos-netx-autoip"></a><span data-ttu-id="3e84e-103">Capitolo 1-Introduzione ad Azure RTO NetX AutoIP</span><span class="sxs-lookup"><span data-stu-id="3e84e-103">Chapter 1 - Introduction to Azure RTOS NetX AutoIP</span></span>
  
<span data-ttu-id="3e84e-104">Il protocollo AutoIP NetX di Azure RTO è un protocollo progettato per la configurazione dinamica degli indirizzi IPv4 in una rete locale.</span><span class="sxs-lookup"><span data-stu-id="3e84e-104">The Azure RTOS NetX AutoIP Protocol is a protocol designed for dynamically configuring IPv4 addresses on a local network.</span></span> <span data-ttu-id="3e84e-105">AutoIP è un protocollo semplice che utilizza le funzionalità ARP per eseguire la relativa funzione di assegnazione automatica degli indirizzi IP.</span><span class="sxs-lookup"><span data-stu-id="3e84e-105">AutoIP is a simple protocol that utilizes ARP capabilities to perform its automatic IP address assignment function.</span></span> <span data-ttu-id="3e84e-106">AutoIP alloca gli indirizzi nell'intervallo tra 169.254.1.0 e 169.254.254.255.</span><span class="sxs-lookup"><span data-stu-id="3e84e-106">AutoIP allocates addresses in the range of 169.254.1.0 through 169.254.254.255.</span></span>

## <a name="autoip-requirements"></a><span data-ttu-id="3e84e-107">Requisiti di AutoIP</span><span class="sxs-lookup"><span data-stu-id="3e84e-107">AutoIP Requirements</span></span>

<span data-ttu-id="3e84e-108">Per funzionare correttamente, il pacchetto NetX AutoIP richiede che sia già stata creata un'istanza IP NetX.</span><span class="sxs-lookup"><span data-stu-id="3e84e-108">In order to function properly, the NetX AutoIP package requires that a NetX IP instance has already been created.</span></span> <span data-ttu-id="3e84e-109">Inoltre, è necessario abilitare ARP nella stessa istanza di IP.</span><span class="sxs-lookup"><span data-stu-id="3e84e-109">In addition, ARP must be enabled on that same IP instance.</span></span> <span data-ttu-id="3e84e-110">Il pacchetto AutoIP NetX non ha altri requisiti.</span><span class="sxs-lookup"><span data-stu-id="3e84e-110">The NetX AutoIP package has no further requirements.</span></span>

## <a name="autoip-constraints"></a><span data-ttu-id="3e84e-111">Vincoli AutoIP</span><span class="sxs-lookup"><span data-stu-id="3e84e-111">AutoIP Constraints</span></span> 

<span data-ttu-id="3e84e-112">Il protocollo NetX AutoIP implementa i requisiti dello standard RFC3927.</span><span class="sxs-lookup"><span data-stu-id="3e84e-112">The NetX AutoIP protocol implements the requirements of the RFC3927 standard.</span></span> <span data-ttu-id="3e84e-113">Esistono tuttavia i vincoli seguenti:</span><span class="sxs-lookup"><span data-stu-id="3e84e-113">However, there are the following constraints:</span></span>

1. <span data-ttu-id="3e84e-114">Se si usa NetX DHCP, è necessario creare il thread DHCP con una priorità più elevata rispetto al thread dell'istanza IP di NetX e al thread AutoIP.</span><span class="sxs-lookup"><span data-stu-id="3e84e-114">If NetX DHCP is used, the DHCP thread must be created with a higher priority than both the NetX IP instance thread and the AutoIP thread.</span></span>
1. <span data-ttu-id="3e84e-115">NetX AutoIP non fornisce un meccanismo per continuare a utilizzare gli indirizzi IP precedenti.</span><span class="sxs-lookup"><span data-stu-id="3e84e-115">NetX AutoIP does not provide a mechanism for old IP addresses to continue being used.</span></span>
1. <span data-ttu-id="3e84e-116">Quando l'indirizzo IP viene modificato, l'applicazione è responsabile della rimozione di tutte le connessioni TCP esistenti e della relativa ridefinizione nel nuovo indirizzo IP.</span><span class="sxs-lookup"><span data-stu-id="3e84e-116">When the IP address changes, the application is responsible for tearing down any existing TCP connections and re-establishing them on the new IP address.</span></span>

## <a name="autoip-protocol-implementation"></a><span data-ttu-id="3e84e-117">Implementazione del protocollo AutoIP</span><span class="sxs-lookup"><span data-stu-id="3e84e-117">AutoIP Protocol Implementation</span></span>

<span data-ttu-id="3e84e-118">Il protocollo NetX AutoIP seleziona innanzitutto un indirizzo casuale all'interno dell'intervallo di indirizzi IPv4 AutoIP di 169.254.1.0 tramite 169.254.254.255.</span><span class="sxs-lookup"><span data-stu-id="3e84e-118">The NetX AutoIP protocol first selects a random address within the AutoIP IPv4 address range of 169.254.1.0 through 169.254.254.255.</span></span> <span data-ttu-id="3e84e-119">In alternativa, l'applicazione può forzare un indirizzo IP iniziale fornendolo alla funzione ***nx_auto_ip_start*** .</span><span class="sxs-lookup"><span data-stu-id="3e84e-119">Alternatively, the application may force a starting IP address by providing it to the ***nx_auto_ip_start*** function.</span></span> <span data-ttu-id="3e84e-120">Questa operazione è utile nelle situazioni in cui un indirizzo AutoIP è stato usato correttamente in un'esecuzione precedente.</span><span class="sxs-lookup"><span data-stu-id="3e84e-120">This is useful in situations where an AutoIP address was successfully used in a prior run.</span></span>

<span data-ttu-id="3e84e-121">Una volta selezionato un indirizzo AutoIP, NetX AutoIP invia una serie di probe ARP per l'indirizzo selezionato.</span><span class="sxs-lookup"><span data-stu-id="3e84e-121">Once an AutoIP address is selected, NetX AutoIP sends out a series of ARP probes for the selected address.</span></span> <span data-ttu-id="3e84e-122">Un probe ARP è costituito da un messaggio di richiesta ARP con l'indirizzo mittente impostato su 0.0.0.0 e l'indirizzo di destinazione impostato sull'indirizzo AutoIP desiderato.</span><span class="sxs-lookup"><span data-stu-id="3e84e-122">An ARP probe consists of an ARP request message with the sender address set to 0.0.0.0 and the target address set to the desired AutoIP address.</span></span> <span data-ttu-id="3e84e-123">Viene inviata una serie di probe ARP (il numero effettivo è determinato dall'NX_AUTO_IP_PROBE_NUM di definizione).</span><span class="sxs-lookup"><span data-stu-id="3e84e-123">A series of these ARP probes are sent (the actual number is determined by the define NX_AUTO_IP_PROBE_NUM).</span></span> <span data-ttu-id="3e84e-124">Se un altro nodo di rete risponde a questo probe o Invia un probe identico per lo stesso indirizzo, viene selezionato in modo casuale un nuovo indirizzo AutoIP all'interno dell'intervallo di indirizzi IPv4 di AutoIP e l'elaborazione del probe si ripete.</span><span class="sxs-lookup"><span data-stu-id="3e84e-124">If another network node responds to this probe or sends an identical probe for the same address, a new AutoIP address is randomly selected within the AutoIP IPv4 address range and the probe processing repeats.</span></span>

<span data-ttu-id="3e84e-125">Se NX_AUTO_IP_PROBE_NUM probe vengono inviati senza risposte, NetX AutoIP genera una serie di annunci ARP per l'indirizzo selezionato.</span><span class="sxs-lookup"><span data-stu-id="3e84e-125">If NX_AUTO_IP_PROBE_NUM probes are sent without any responses, NetX AutoIP issues a series of ARP announcements for the selected address.</span></span> <span data-ttu-id="3e84e-126">Un annuncio ARP è costituito da un messaggio di richiesta ARP con il mittente e l'indirizzo di destinazione nel messaggio ARP impostato sull'indirizzo AutoIP selezionato.</span><span class="sxs-lookup"><span data-stu-id="3e84e-126">An ARP announcement consists of an ARP request message with both the sender and target address in the ARP message set to the selected AutoIP address.</span></span> <span data-ttu-id="3e84e-127">Viene inviata una serie di messaggi di annuncio ARP, corrispondenti al NX_AUTO_IP_ANNOUNCE_NUM define.</span><span class="sxs-lookup"><span data-stu-id="3e84e-127">A series of ARP announcement messages are sent, corresponding to the define NX_AUTO_IP_ANNOUNCE_NUM.</span></span> <span data-ttu-id="3e84e-128">Se un altro nodo di rete risponde a un messaggio di annuncio o Invia un annuncio identico per lo stesso indirizzo, viene selezionato in modo casuale un nuovo indirizzo AutoIP all'interno dell'intervallo di indirizzi IPv4 di AutoIP e l'elaborazione del probe viene riavviata.</span><span class="sxs-lookup"><span data-stu-id="3e84e-128">If another network node responds to an announce message or sends an identical announcement for the same address, a new AutoIP address is randomly selected within the AutoIP IPv4 address range and the probe processing starts over.</span></span>

<span data-ttu-id="3e84e-129">Quando il probe e l'annuncio vengono completati senza conflitti rilevati, l'indirizzo AutoIP selezionato viene considerato valido e l'istanza IP associata viene impostata con questo indirizzo.</span><span class="sxs-lookup"><span data-stu-id="3e84e-129">When the probe and announcement completes without any detected conflicts, the selected AutoIP address is considered valid and the associated IP instance is setup with this address.</span></span>

## <a name="autoip-address-change"></a><span data-ttu-id="3e84e-130">Modifica dell'indirizzo AutoIP</span><span class="sxs-lookup"><span data-stu-id="3e84e-130">AutoIP Address Change</span></span>

<span data-ttu-id="3e84e-131">Come indicato in precedenza, NetX AutoIP modifica l'indirizzo dell'istanza IP dopo l'elaborazione del probe e dell'annuncio riuscita.</span><span class="sxs-lookup"><span data-stu-id="3e84e-131">As mentioned before, NetX AutoIP changes the IP instance address after successful probe and announcement processing.</span></span> <span data-ttu-id="3e84e-132">Il monitoraggio per questo caso non è particolarmente importante.</span><span class="sxs-lookup"><span data-stu-id="3e84e-132">Monitoring for this case is not terribly important.</span></span> <span data-ttu-id="3e84e-133">Tuttavia, è possibile che l'indirizzo AutoIP cambi in futuro.</span><span class="sxs-lookup"><span data-stu-id="3e84e-133">However, it is possible to have the AutoIP address change in the future.</span></span> <span data-ttu-id="3e84e-134">Le possibili cause includono i conflitti di indirizzi AutoIP futuri, nonché la risoluzione degli indirizzi DHCP.</span><span class="sxs-lookup"><span data-stu-id="3e84e-134">Potential causes include future AutoIP address conflicts as well as DHCP address resolution.</span></span> <span data-ttu-id="3e84e-135">Per elaborare correttamente queste situazioni potenziali, l'applicazione deve usare l'API NetX seguente per avvisare l'IT di qualsiasi e tutte le modifiche all'indirizzo IP:</span><span class="sxs-lookup"><span data-stu-id="3e84e-135">In order to process these potential situations properly, the application should use the following NetX API to alert it of any and all IP address changes:</span></span>

```c
nx_ip_address_change_notify(NX_IP *ip_ptr,
                            VOID (*ip_address_change_notify)(NX_IP *,VOID*),
                            VOID *additional_info);
```

<span data-ttu-id="3e84e-136">L'elaborazione nella funzione *ip_address_change_notify* fornita deve riavviare il processore AutoIP di NETX o disabilitarla se l'indirizzo IP è stato risolto successivamente da DHCP.</span><span class="sxs-lookup"><span data-stu-id="3e84e-136">The processing in the supplied *ip_address_change_notify* function must either restart the NetX AutoIP processor or disable it if DHCP has subsequently resolved the IP address.</span></span> <span data-ttu-id="3e84e-137">Per l'elaborazione di esempio, vedere la sezione di *sistema di esempio di piccole dimensioni* .</span><span class="sxs-lookup"><span data-stu-id="3e84e-137">Please refer to the *Small Example System* section for sample processing.</span></span>

## <a name="autoip-rfcs"></a><span data-ttu-id="3e84e-138">RFC AutoIP</span><span class="sxs-lookup"><span data-stu-id="3e84e-138">AutoIP RFCs</span></span>

<span data-ttu-id="3e84e-139">AutoIP NetX è conforme a RFC3927 e alle RFC correlate.</span><span class="sxs-lookup"><span data-stu-id="3e84e-139">NetX AutoIP is compliant with RFC3927 and related RFCs.</span></span>